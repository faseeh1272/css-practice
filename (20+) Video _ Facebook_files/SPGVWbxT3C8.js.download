;/*FB_PKG_DELIM*/

__d("StoriesCreateBlurredBgReducer",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){switch(b.type){case"blurredBg_update_bg":return babelHelpers["extends"]({},a,{blurredBg:{bottomColor:b.bottomColor,topColor:b.topColor}})}return a}f["default"]=a}),66);
__d("StoriesCreateCTALink.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesCreateCTALink",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{kind:"InlineDataFragmentSpread",name:"StoriesCreateCTAUtils_pageAddressAndLocation",selections:[{alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"single_line_full_address",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"latitude",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"longitude",storageKey:null}],storageKey:null}],args:null,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"StoriesCreateCTAUtils_pagePhoneNumber",selections:[{alias:null,args:null,concreteType:"Phone",kind:"LinkedField",name:"all_phones",plural:!0,selections:[{alias:null,args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"universal_number",storageKey:null}],storageKey:null}],storageKey:null}],args:null,argumentDefinitions:[]},{alias:null,args:null,kind:"ScalarField",name:"websites",storageKey:null}],type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_additional_profile_plus",storageKey:null}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"StoriesCreateCTALinkPicker_data"}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("StoriesCreateCTALinkPicker_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesCreateCTALinkPicker_data",selections:[{alias:null,args:null,concreteType:"StoriesCreateCTALinkOptions",kind:"LinkedField",name:"stories_create_cta_link_options",plural:!1,selections:[{args:null,documentName:"StoriesCreateCTALinkPicker_data",fragmentName:"StoriesCreateCTALinkMainOptions_data",fragmentPropName:"data",kind:"ModuleImport"}],storageKey:null}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("StoriesCreateCTALinkPicker.react",["fbt","CometRelay","FDSButton.react","FDSText.react","FDSTrashFilled16Icon","RelayHooks","StoriesCreateCTALinkPicker_data.graphql","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=i!==void 0?i:i=b("StoriesCreateCTALinkPicker_data.graphql");function a(a){var b=d("react-compiler-runtime").c(16),e=a.dataRef,f=a.linkInputError,g=a.onChange,i=a.onDelete;a=a.pageLinks;e=d("RelayHooks").useFragment(l,e);e=e==null?void 0:e.stories_create_cta_link_options;var j;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(j={className:"x443n21 x1obq294 x5a5i1n xde0f50 x15x8krk x14vqqas xyamay9 x1l90r2v xf7dkkf xv54qhq"},b[0]=j):j=b[0];var m;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(m=k.jsx(c("FDSText.react"),{type:"bodyLink2",children:h._(/*BTDS*/"Add button")}),b[1]=m):m=b[1];var n;b[2]!==e||b[3]!==f||b[4]!==g||b[5]!==a?(n={dataRef:e,linkInputError:f,onChange:g,pageLinks:a},b[2]=e,b[3]=f,b[4]=g,b[5]=a,b[6]=n):n=b[6];b[7]!==e||b[8]!==n?(f=k.jsx(d("CometRelay").MatchContainer,{match:e,props:n}),b[7]=e,b[8]=n,b[9]=f):f=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"Remove button"),b[10]=g):g=b[10];b[11]!==i?(a=k.jsx(c("FDSButton.react"),{icon:c("FDSTrashFilled16Icon"),label:g,onPress:i,type:"secondary"}),b[11]=i,b[12]=a):a=b[12];b[13]!==f||b[14]!==a?(e=k.jsxs("div",babelHelpers["extends"]({},j,{children:[m,f,a]})),b[13]=f,b[14]=a,b[15]=e):e=b[15];return e}g["default"]=a}),226);
__d("StoriesCreateCTALinkReducer",[],(function(a,b,c,d,e,f){"use strict";var g={ctaType:null,link:null,linkInputError:!1,page:null};function a(a,b){var c=a.ctaLinkData;c==null&&(c=babelHelpers["extends"]({},g));switch(b.type){case"CTA_LINK_UPDATE":return babelHelpers["extends"]({},a,{ctaLinkData:babelHelpers["extends"]({},c,b.data)});case"CTA_LINK_DELETE":return babelHelpers["extends"]({},a,{ctaLinkData:babelHelpers["extends"]({},g)});case"CTA_UPDATE_LINK_INPUT_ERROR":return babelHelpers["extends"]({},a,{ctaLinkData:babelHelpers["extends"]({},c,{linkInputError:b.error})})}return a}f["default"]=a}),66);
__d("StoriesCreateCTAUtils_pageAddressAndLocation.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"StoriesCreateCTAUtils_pageAddressAndLocation"};e.exports=a}),null);
__d("StoriesCreateCTAUtils_pagePhoneNumber.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"StoriesCreateCTAUtils_pagePhoneNumber"};e.exports=a}),null);
__d("StoriesCreateCTAUtils",["CometRelay","StoriesCreateCTAUtils_pageAddressAndLocation.graphql","StoriesCreateCTAUtils_pagePhoneNumber.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var c;a=d("CometRelay").readInlineData(h!==void 0?h:h=b("StoriesCreateCTAUtils_pagePhoneNumber.graphql"),a);a=a==null||(c=a.all_phones[0])==null||(c=c.phone_number)==null?void 0:c.universal_number;return a!=null?"tel:"+a:null}function c(a){var c,e,f;a=d("CometRelay").readInlineData(i!==void 0?i:i=b("StoriesCreateCTAUtils_pageAddressAndLocation.graphql"),a);var g=a==null||(c=a.address)==null?void 0:c.single_line_full_address,h=null,j="fbgeo://",k=a==null||(e=a.location)==null?void 0:e.latitude;a=a==null||(f=a.location)==null?void 0:f.longitude;k!=null&&a!=null&&(h=""+j+k+","+a);g!=null&&(h=h==null?j+'"'+g+'"':h+',"'+g+'"');return h}g.getURLFromPhoneNumber=a;g.getURLFromAddress=c}),98);
__d("StoriesCreateToolContent.react",["FDSIcon.react","FDSListCell.react","FDSListCellText.react","FDSSkittleIcon.react","FDSText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(23),e=a.buttonProps;a=a.isDisabled;a=a===void 0?!1:a;var f=e.toolComponentBottom,g=e.toolComponentEnd,h=e.toolDescription,j=e.toolIcon,k=e.toolIconEnd;e=e.toolLabel;var l;b[0]!==a||b[1]!==g||b[2]!==k?(l=g?g:k?i.jsx(c("FDSIcon.react"),{color:"primary",disabled:a,icon:k}):null,b[0]=a,b[1]=g,b[2]=k,b[3]=l):l=b[3];g=l;k=f?f:null;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(l={className:"xdj266r x14z9mp xat24cr x1lziwak xh8yej3"},b[4]=l):l=b[4];b[5]!==a||b[6]!==j?(f=j!=null?i.jsx(c("FDSSkittleIcon.react"),{color:"gray",disabled:a,icon:j,size:40}):void 0,b[5]=a,b[6]=j,b[7]=f):f=b[7];b[8]!==a||b[9]!==h?(j=h!=null?i.jsx(c("FDSText.react"),{color:a?"disabled":null,type:"headlineDeemphasized4",children:h}):void 0,b[8]=a,b[9]=h,b[10]=j):j=b[10];h=a?"disabled":null;var m;b[11]!==h||b[12]!==e?(m=i.jsx(c("FDSText.react"),{color:h,type:"headline3",children:e}),b[11]=h,b[12]=e,b[13]=m):m=b[13];b[14]!==j||b[15]!==m?(h=i.jsx(c("FDSListCellText.react"),{body:j,headline:m}),b[14]=j,b[15]=m,b[16]=h):h=b[16];b[17]!==k||b[18]!==g||b[19]!==a||b[20]!==f||b[21]!==h?(e=i.jsx("div",babelHelpers["extends"]({},l,{children:i.jsx(c("FDSListCell.react"),{addOnBottom:k,addOnEnd:g,addOnStart:f,content:h,contentPaddingHorizontal:12,disabled:a})})),b[17]=k,b[18]=g,b[19]=a,b[20]=f,b[21]=h,b[22]=e):e=b[22];return e}g["default"]=a}),98);
__d("StoriesCreateToolButton.react",["CometPressable.react","StoriesCreateToolContent.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={button:{borderStartStartRadius:"x13t61ll",borderStartEndRadius:"x1kchd1x",borderEndEndRadius:"x1u0fnx4",borderEndStartRadius:"xbxn0j6",marginTop:"x1xmf6yo",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(7),e=a.buttonProps,f=a.isDisabled;a=a.onClick;f=f===void 0?!1:f;var g;b[0]!==e||b[1]!==f?(g=i.jsx(c("StoriesCreateToolContent.react"),{buttonProps:e,isDisabled:f,shouldApplyAdditionStyle:!1}),b[0]=e,b[1]=f,b[2]=g):g=b[2];b[3]!==f||b[4]!==a||b[5]!==g?(e=i.jsx(c("CometPressable.react"),{disabled:f,onPress:a,xstyle:j.button,children:g}),b[3]=f,b[4]=a,b[5]=g,b[6]=e):e=b[6];return e}g["default"]=a}),98);
__d("StoriesCreateCTALink.react",["fbt","CometRelay","FDSLinkFilled24Icon","StoriesCreateCTALink.graphql","StoriesCreateCTALinkPicker.react","StoriesCreateCTALinkReducer","StoriesCreateCTAUtils","StoriesCreateToolButton.react","StoriesCreateViewStateDispatcherContext","react","react-compiler-runtime","useCometConfirmationDialog","useStoriesCreateReducer","withStoriesCreateViewStatePart"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;e.useCallback;var l=e.useContext,m=e.useEffect,n=e.useState,o=i!==void 0?i:i=b("StoriesCreateCTALink.graphql");function a(a){var b,e=d("react-compiler-runtime").c(16),f=a.ctaData;a=a.dataRef;var g=n(!1),i=g[0],j=g[1];e[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={addressLink:null,phoneNumberLink:null,websiteLink:null},e[0]=g):g=e[0];g=n(g);var p=g[0],q=g[1],r=c("useCometConfirmationDialog")();c("useStoriesCreateReducer")(c("StoriesCreateCTALinkReducer"));var s=l(c("StoriesCreateViewStateDispatcherContext"));g=d("CometRelay").useFragment(o,a);var t=g==null||(b=g.viewer)==null?void 0:b.actor;a=(t==null?void 0:t.__typename)==="User"&&(t==null?void 0:t.is_additional_profile_plus)===!0||!1;var u,v;e[1]!==t?(u=function(){if((t==null?void 0:t.__typename)==="Page"){var a;q({addressLink:d("StoriesCreateCTAUtils").getURLFromAddress(t),phoneNumberLink:d("StoriesCreateCTAUtils").getURLFromPhoneNumber(t),websiteLink:(a=t==null?void 0:t.websites[0])!=null?a:null})}},v=[t],e[1]=t,e[2]=u,e[3]=v):(u=e[2],v=e[3]);m(u,v);e[4]!==s?(u=function(a){s({data:{ctaType:a.ctaType,link:a.link,linkInputError:!1,page:a.page},type:"CTA_LINK_UPDATE"})},e[4]=s,e[5]=u):u=e[5];v=u;if((t==null?void 0:t.__typename)!=="Page"&&!a)return null;e[6]!==s||e[7]!==r?(u=function(){r({body:h._(/*BTDS*/"Are you sure you want to delete the button?"),confirm:h._(/*BTDS*/"Yes"),title:h._(/*BTDS*/"Delete button")},function(){s({type:"CTA_LINK_DELETE"}),j(!1)})},e[6]=s,e[7]=r,e[8]=u):u=e[8];a=u;if(i){e[9]!==f.linkInputError||e[10]!==p||e[11]!==v||e[12]!==a||e[13]!==g?(u=k.jsx(c("StoriesCreateCTALinkPicker.react"),{dataRef:g,linkInputError:f.linkInputError,onChange:v,onDelete:a,pageLinks:p}),e[9]=f.linkInputError,e[10]=p,e[11]=v,e[12]=a,e[13]=g,e[14]=u):u=e[14];return u}e[15]===Symbol["for"]("react.memo_cache_sentinel")?(i=k.jsx(c("StoriesCreateToolButton.react"),{buttonProps:{toolIcon:c("FDSLinkFilled24Icon"),toolLabel:h._(/*BTDS*/"Add button")},onClick:function(){j(!0)}}),e[15]=i):i=e[15];return i}f=c("withStoriesCreateViewStatePart")(a,function(a){return{ctaData:a.ctaLinkData}});g["default"]=f}),226);
__d("StoriesCreateDominantColorBg.react",["StoriesCreateBlurredBgReducer","StoriesCreateViewStateDispatcherContext","StoriesEnums","StoriesGradientBackground.react","react","react-compiler-runtime","stylex","useStoriesCreateReducer","useStoriesDominantColorPicker","withStoriesCreateViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useContext,l={blue:0,clusterSize:0,green:0,red:0},m={root:{height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"xh8yej3",$$css:!0},rounded:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(19),e=a.displayedURI,f=a.frameWidth;a=a.rounded;c("useStoriesCreateReducer")(c("StoriesCreateBlurredBgReducer"));var g=k(c("StoriesCreateViewStateDispatcherContext")),i;b[0]!==e?(i={imageURL:e},b[0]=e,b[1]=i):i=b[1];i=c("useStoriesDominantColorPicker")(i);if(e==null){e=a&&m.rounded;b[2]!==e?(a=(h||(h=c("stylex")))(m.root,e),b[2]=e,b[3]=a):a=b[3];b[4]!==f?(e={width:f},b[4]=f,b[5]=e):e=b[5];var n;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(n=j.jsx(c("StoriesGradientBackground.react"),{direction:d("StoriesEnums").GRADIENT_DIRECTION.TOP_BOTTOM,from:"rgb("+l.red+", "+l.green+","+l.blue,to:"rgb("+l.red+", "+l.green+","+l.blue}),b[6]=n):n=b[6];b[7]!==a||b[8]!==e?(n=j.jsx("div",{className:a,style:e,children:n}),b[7]=a,b[8]=e,b[9]=n):n=b[9];return n}g({bottomColor:i.bottomColor,topColor:i.topColor,type:"blurredBg_update_bg"});b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a="x5yr21d x6ikm8r x10wlt62 x10l6tqk xh8yej3",b[10]=a):a=b[10];b[11]!==f?(e={width:f},b[11]=f,b[12]=e):e=b[12];b[13]!==i.bottomColor||b[14]!==i.topColor?(n=j.jsx(c("StoriesGradientBackground.react"),{direction:d("StoriesEnums").GRADIENT_DIRECTION.TOP_BOTTOM,from:i.topColor,to:i.bottomColor}),b[13]=i.bottomColor,b[14]=i.topColor,b[15]=n):n=b[15];b[16]!==e||b[17]!==n?(g=j.jsx("div",{className:a,style:e,children:n}),b[16]=e,b[17]=n,b[18]=g):g=b[18];return g}b=c("withStoriesCreateViewStatePart")(a,function(a){return{displayedURI:(a=a.photoData)==null?void 0:a.displayedURI}});g["default"]=b}),98);
__d("StoriesCreateFormAltTextButton.react",["fbt","ix","CometPlaceholder.react","FDSProgressRingIndeterminate.react","JSResourceForInteraction","StoriesCreateToolButton.react","fbicon","lazyLoadComponent","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useState,m=c("lazyLoadComponent")(c("JSResourceForInteraction")("StoriesCreateFormAltTextOptionsList.react").__setRef("StoriesCreateFormAltTextButton.react"));function a(a){var b=d("react-compiler-runtime").c(12),e=a.isDisabled;a=a.photoID;e=e===void 0?!1:e;var g=l(!1),j=g[0],n=g[1];b[0]!==j?(g=function(){n(!j)},b[0]=j,b[1]=g):g=b[1];g=g;e=e||a==null;var o;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(o={toolIcon:d("fbicon")._(i("1546597"),24),toolLabel:h._(/*BTDS*/"Alternative text")},b[2]=o):o=b[2];b[3]!==e||b[4]!==g?(o=k.jsx(c("StoriesCreateToolButton.react"),{buttonProps:o,isDisabled:e,onClick:g}),b[3]=e,b[4]=g,b[5]=o):o=b[5];b[6]!==j||b[7]!==a?(e=j?k.jsx("div",{className:"x1jx94hy x1onr9mi x1pic42t",children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx("div",{className:"x78zum5 xl56j7k xyamay9 xv54qhq x1l90r2v xf7dkkf",children:k.jsx(c("FDSProgressRingIndeterminate.react"),{color:"blue",size:24})}),name:f.id,children:a!=null?k.jsx(m,{photoID:a}):null})}):null,b[6]=j,b[7]=a,b[8]=e):e=b[8];b[9]!==o||b[10]!==e?(g=k.jsxs(k.Fragment,{children:[o,e]}),b[9]=o,b[10]=e,b[11]=g):g=b[11];return g}g["default"]=a}),226);
__d("StoriesCreateFormPhoto_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__FeedComposerComet_isGenAILabelEnabledrelayprovider"}],kind:"Fragment",metadata:null,name:"StoriesCreateFormPhoto_data",selections:[{args:null,kind:"FragmentSpread",name:"StoriesCreateCTALink"},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{condition:"__relay_internal__pv__FeedComposerComet_isGenAILabelEnabledrelayprovider",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"StoriesCometGenAILabelSelector_viewer"}]}],storageKey:null}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("StoriesCreatePhotoReducer",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=a.photoData;c==null&&(c={bounds:{height:0,width:0,x:0,y:0},displayedURI:null,offset:{dx:0,dy:0},rotation:0,scale:0,uploadingInfo:null});switch(b.type){case"photo_update_bounds":return babelHelpers["extends"]({},a,{photoData:babelHelpers["extends"]({},c,{bounds:b.bounds})});case"photo_update_offset":return babelHelpers["extends"]({},a,{photoData:babelHelpers["extends"]({},c,{offset:{dx:b.dx,dy:b.dy}})});case"photo_update_rotation":return babelHelpers["extends"]({},a,{photoData:babelHelpers["extends"]({},c,{rotation:b.value})});case"photo_update_scale":return babelHelpers["extends"]({},a,{photoData:babelHelpers["extends"]({},c,{scale:b.value})});case"photo_update_uri":return babelHelpers["extends"]({},a,{photoData:babelHelpers["extends"]({},c,{displayedURI:b.value})});case"photo_update_upload_id":var d=b.photoDescriptorID,e=b.uploadID;return babelHelpers["extends"]({},a,{photoData:babelHelpers["extends"]({},c,{uploadingInfo:{photoDescriptorID:d,uploadID:e}})});case"photo_update_ent_id":d=c.uploadingInfo==null?null:c.uploadingInfo;if(d!=null)return babelHelpers["extends"]({},a,{photoData:babelHelpers["extends"]({},c,{uploadingInfo:babelHelpers["extends"]({},d,{entID:b.entID})})});break;case"photo_clear_uploading":return babelHelpers["extends"]({},a,{photoData:babelHelpers["extends"]({},c,{uploadingInfo:null})})}return a}f["default"]=a}),66);
__d("StoriesCreateTextOverlaysReducer",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d,e,f,g;d=(d=a.textOverlays)==null?void 0:d.alignment;e=(e=a.textOverlays)==null?void 0:e.editingID;f=(f=(f=a.textOverlays)==null?void 0:f.addTextEnabled)!=null?f:!1;g=((g=a.textOverlays)==null?void 0:g.overlays)||[];switch(b.type){case"text_overlay_create_new":var h=g||[];h=h.slice();var i=c("uuidv4")();!f&&h.length!==0&&h.pop();h.push({id:i,text:void 0});return babelHelpers["extends"]({},a,{textOverlays:{addTextEnabled:f,alignment:d,editingID:i,overlays:h}});case"text_overlay_set_editing":return babelHelpers["extends"]({},a,{textOverlays:{addTextEnabled:f,alignment:d,editingID:b.id,overlays:g}});case"text_overlay_update_text":i=g||[];var j=i.find(function(a){return a.id===b.id});j!=null&&(j.text=b.text);i=i.filter(function(a){return(j==null?void 0:j.id)!==a.id||a.text!=null&&a.text.trim().length>0});return babelHelpers["extends"]({},a,{textOverlays:{addTextEnabled:f,alignment:d,editingID:e===(j==null?void 0:j.id)?null:e,overlays:i}});case"text_overlay_delete_text":h=g||[];h=h.filter(function(a){return a.id!==b.id});return babelHelpers["extends"]({},a,{textOverlays:{addTextEnabled:f,alignment:d,editingID:e,overlays:h}});case"text_overlay_set_rotating":return babelHelpers["extends"]({},a,{isObjectRotating:b.isRotating});case"text_overlay_set_alignment":return babelHelpers["extends"]({},a,{textOverlays:{addTextEnabled:f,alignment:b.alignment,editingID:e,overlays:g}});case"text_overlay_set_add_text_enabled":return babelHelpers["extends"]({},a,{textOverlays:{addTextEnabled:b.addTextEnabled,alignment:d,editingID:e,overlays:g}})}return a}g["default"]=a}),98);
__d("StoriesCreateFormPhoto.react",["fbt","FDSTextFilled24Icon","QPLUserFlow","RelayHooks","StoriesCreateCTALink.react","StoriesCreateDefaultToolPlaceholder.react","StoriesCreateFormPhoto_data.graphql","StoriesCreatePhotoReducer","StoriesCreateTextOverlaysReducer","StoriesCreateToolButton.react","StoriesCreateViewStateDispatcherContext","cr:10601","cr:12075","cr:17161","qpl","react","react-compiler-runtime","useStoriesCreateReducer","withStoriesCreateViewStatePart"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useContext,m={loadingIndicator:{height:"x1xeopk8",$$css:!0},placeholderContainer:{marginTop:"xw7yly9",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0}},n=i!==void 0?i:i=b("StoriesCreateFormPhoto_data.graphql");function a(a){var e=d("react-compiler-runtime").c(17),f=a.dataRef,g=a.isUploading;a=a.photoID;c("useStoriesCreateReducer")(c("StoriesCreatePhotoReducer"));f=d("RelayHooks").useFragment(n,f);var h,i;e[0]!==g?(h=k.jsx(o,{isDisabled:g}),i=b("cr:10601")!=null?k.jsx(b("cr:10601"),{isDisabled:g}):null,e[0]=g,e[1]=h,e[2]=i):(h=e[1],i=e[2]);var j;e[3]!==g||e[4]!==a?(j=b("cr:17161")!=null&&k.jsx(b("cr:17161"),{isDisabled:g,photoID:a}),e[3]=g,e[4]=a,e[5]=j):j=e[5];e[6]!==f?(a=k.jsx(c("StoriesCreateDefaultToolPlaceholder.react"),{children:k.jsx(c("StoriesCreateCTALink.react"),{dataRef:f})}),e[6]=f,e[7]=a):a=e[7];var l;e[8]!==(f==null?void 0:f.viewer)||e[9]!==g?(l=b("cr:12075")!=null&&k.jsxs(k.Fragment,{children:[k.jsx("hr",{className:"x1234tlj x13fj5qh x1xegmmw"},"spacer"),k.jsx(c("StoriesCreateDefaultToolPlaceholder.react"),{customStyle:{container:m.placeholderContainer,loadingIndicator:m.loadingIndicator},children:k.jsx(b("cr:12075"),{isDisabled:g,viewer:f==null?void 0:f.viewer})})]}),e[8]=f==null?void 0:f.viewer,e[9]=g,e[10]=l):l=e[10];e[11]!==h||e[12]!==i||e[13]!==j||e[14]!==a||e[15]!==l?(f=k.jsxs("div",{children:[h,i,j,a,l]}),e[11]=h,e[12]=i,e[13]=j,e[14]=a,e[15]=l,e[16]=f):f=e[16];return f}function o(a){var b=d("react-compiler-runtime").c(6);a=a.isDisabled;a=a===void 0?!1:a;c("useStoriesCreateReducer")(c("StoriesCreateTextOverlaysReducer"));var e=l(c("StoriesCreateViewStateDispatcherContext")),f;b[0]!==e?(f=function(){window.requestAnimationFrame(function(){e({type:"text_overlay_create_new"})}),c("QPLUserFlow").addPoint(c("qpl")._(13250512,"1219"),"Add text button pressed")},b[0]=e,b[1]=f):f=b[1];f=f;var g;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(g={toolIcon:c("FDSTextFilled24Icon"),toolLabel:h._(/*BTDS*/"Add text")},b[2]=g):g=b[2];b[3]!==a||b[4]!==f?(g=k.jsx(c("StoriesCreateDefaultToolPlaceholder.react"),{children:k.jsx(c("StoriesCreateToolButton.react"),{buttonProps:g,isDisabled:a,onClick:f})}),b[3]=a,b[4]=f,b[5]=g):g=b[5];return g}e=c("withStoriesCreateViewStatePart")(a,function(a){var b;return{altTextData:a.altTextData,isUploading:(b=a.isUploading)!=null?b:!1,photoID:(a=(b=a.mediaAttachments)==null||(b=b[0])==null?void 0:b.entID)!=null?a:null}});g["default"]=e}),226);
__d("StoriesCreatePhotoRotateButton.react",["fbt","ix","FDSButton.react","StoriesCreateViewStateDispatcherContext","fbicon","react","react-compiler-runtime","withStoriesCreateViewStatePart"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useContext;function a(a){var b=d("react-compiler-runtime").c(11),e=a.rotation,f=l(c("StoriesCreateViewStateDispatcherContext"));b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x13fj5qh"},b[0]=a):a=b[0];var g;b[1]!==e?(g=e>0?h._(/*BTDS*/"_j{\"*\":\"Rotated {number} degrees clockwise\",\"_1\":\"Rotated degree clockwise\"}",[h._plural(e,"number")]):void 0,b[1]=e,b[2]=g):g=b[2];var j,m;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(j=d("fbicon")._(i("1295657"),16),m=h._(/*BTDS*/"Rotate"),b[3]=j,b[4]=m):(j=b[3],m=b[4]);var n;b[5]!==f||b[6]!==e?(n=function(){f({type:"photo_update_rotation",value:(e+90)%360})},b[5]=f,b[6]=e,b[7]=n):n=b[7];b[8]!==g||b[9]!==n?(a=k.jsx("div",babelHelpers["extends"]({},a,{children:k.jsx(c("FDSButton.react"),{"aria-label":g,icon:j,label:m,onPress:n,type:"secondary"})})),b[8]=g,b[9]=n,b[10]=a):a=b[10];return a}b=c("withStoriesCreateViewStatePart")(a,function(a){return{rotation:(a=(a=a.photoData)==null?void 0:a.rotation)!=null?a:0}});g["default"]=b}),226);
__d("StoriesCreatePhotoFooterControls.react",["fbt","CometPressable.react","FDSIcon.react","FDSMinusFilled16Icon","FDSPlusFilled16Icon","FDSSlider.react","StoriesCreatePhotoRotateButton.react","StoriesCreateViewStateDispatcherContext","react","react-compiler-runtime","withStoriesCreateViewStatePart"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useContext,l=b.useRef;function a(a){var b=d("react-compiler-runtime").c(56),e=a.frameWidth,f=a.maxScale,g=a.minScale,i=a.scale,m=k(c("StoriesCreateViewStateDispatcherContext"));a=Math.floor(.8*e);var n=l(null);b[0]!==m?(e=function(a){m({type:"photo_update_scale",value:a})},b[0]=m,b[1]=e):e=b[1];var o=e;b[2]!==f||b[3]!==g||b[4]!==o?(e=function(a){o(Math.min(Math.max(a,g),f))},b[2]=f,b[3]=g,b[4]=o,b[5]=e):e=b[5];var p=e;b[6]!==p||b[7]!==i?(e=function(a){window.clearInterval(n.current);var b=i+a;n.current=window.setInterval(function(){b=b+a,b,p(b)},150)},b[6]=p,b[7]=i,b[8]=e):e=b[8];var q=e;b[9]!==p||b[10]!==i?(e=function(a){window.clearInterval(n.current);a=i+a;p(a)},b[9]=p,b[10]=i,b[11]=e):e=b[11];var r=e,s;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x6s0dn4 x78zum5"},s={className:"x1y1aw1k xf159sx xwib8y2 xmzvs34"},b[12]=e,b[13]=s):(e=b[12],s=b[13]);var t;b[14]===Symbol["for"]("react.memo_cache_sentinel")?(t=h._(/*BTDS*/"scale image down"),b[14]=t):t=b[14];var u=i===g,v;b[15]!==r?(v=function(){r(-.1)},b[15]=r,b[16]=v):v=b[16];var w;b[17]!==q?(w=function(){q(-.1)},b[17]=q,b[18]=w):w=b[18];var x,y;b[19]===Symbol["for"]("react.memo_cache_sentinel")?(x=function(){window.clearInterval(n.current)},y=j.jsx(c("FDSIcon.react"),{color:"white",icon:c("FDSMinusFilled16Icon")}),b[19]=x,b[20]=y):(x=b[19],y=b[20]);b[21]!==w||b[22]!==u||b[23]!==v?(s=j.jsx("div",babelHelpers["extends"]({},s,{children:j.jsx(c("CometPressable.react"),{"aria-label":t,disabled:u,onPress:v,onPressIn:w,onPressOut:x,children:y})})),b[21]=w,b[22]=u,b[23]=v,b[24]=s):s=b[24];b[25]===Symbol["for"]("react.memo_cache_sentinel")?(t="xh8yej3",b[25]=t):t=b[25];x=a+"px";b[26]!==x?(y={width:x},b[26]=x,b[27]=y):y=b[27];b[28]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._(/*BTDS*/"Zoom"),b[28]=w):w=b[28];b[29]!==o?(u=function(a){o(a)},b[29]=o,b[30]=u):u=b[30];b[31]!==f||b[32]!==g||b[33]!==i||b[34]!==u?(v=j.jsx(c("FDSSlider.react"),{label:w,max:f,min:g,onChange:u,step:.01,value:i}),b[31]=f,b[32]=g,b[33]=i,b[34]=u,b[35]=v):v=b[35];b[36]!==y||b[37]!==v?(a=j.jsx("div",{className:t,style:y,children:v}),b[36]=y,b[37]=v,b[38]=a):a=b[38];b[39]===Symbol["for"]("react.memo_cache_sentinel")?(x={className:"x1y1aw1k xf159sx xwib8y2 xmzvs34"},b[39]=x):x=b[39];b[40]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._(/*BTDS*/"scale image up"),b[40]=w):w=b[40];u=i===f;b[41]!==r?(t=function(){r(.1)},b[41]=r,b[42]=t):t=b[42];b[43]!==q?(y=function(){q(.1)},b[43]=q,b[44]=y):y=b[44];var z;b[45]===Symbol["for"]("react.memo_cache_sentinel")?(v=function(){window.clearInterval(n.current)},z=j.jsx(c("FDSIcon.react"),{color:"white",icon:c("FDSPlusFilled16Icon")}),b[45]=v,b[46]=z):(v=b[45],z=b[46]);b[47]!==u||b[48]!==t||b[49]!==y?(x=j.jsx("div",babelHelpers["extends"]({},x,{children:j.jsx(c("CometPressable.react"),{"aria-label":w,disabled:u,onPress:t,onPressIn:y,onPressOut:v,children:z})})),b[47]=u,b[48]=t,b[49]=y,b[50]=x):x=b[50];b[51]===Symbol["for"]("react.memo_cache_sentinel")?(w=j.jsx(c("StoriesCreatePhotoRotateButton.react"),{}),b[51]=w):w=b[51];b[52]!==s||b[53]!==a||b[54]!==x?(v=j.jsxs("div",babelHelpers["extends"]({},e,{children:[s,a,x,w]})),b[52]=s,b[53]=a,b[54]=x,b[55]=v):v=b[55];return v}e=c("withStoriesCreateViewStatePart")(a,function(a){return{scale:(a=(a=a.photoData)==null?void 0:a.scale)!=null?a:1}});g["default"]=e}),226);
__d("StoriesCreatePhotoFooterInstructions.react",["fbt","FDSText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={className:"x6s0dn4 x78zum5"},a[0]=b):b=a[0];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx("div",babelHelpers["extends"]({},b,{children:j.jsx(c("FDSText.react"),{color:"primaryOnMedia",type:"body2",children:h._(/*BTDS*/"Select photo to crop and rotate")})})),a[1]=b):b=a[1];return b}g["default"]=a}),226);
__d("StoriesCreatePhotoPreviewFallback.react",["CollageItemFallback.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.filename,f=a.frameWidth;a=a.percentComplete;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g="x1ey2m1c xbudbmw x10l6tqk x13vifvy xuuh30",b[0]=g):g=b[0];f=f+"px";var h;b[1]!==f?(h={width:f},b[1]=f,b[2]=h):h=b[2];b[3]!==e||b[4]!==a?(f=i.jsx(c("CollageItemFallback.react"),{fileType:"PHOTO",filename:e,percentComplete:a}),b[3]=e,b[4]=a,b[5]=f):f=b[5];b[6]!==h||b[7]!==f?(e=i.jsx("div",{className:g,style:h,children:f}),b[6]=h,b[7]=f,b[8]=e):e=b[8];return e}g["default"]=a}),98);
__d("StoriesCreateUploadingOrUploadedPhotoItem.react",["BaseImage.react","StoriesCreatePhotoPreviewFallback.react","react","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState;function a(a){var b=a.attachment,e=a.frameWidth,f=a.onError,g=a.onLoad,h=a.ref;a=a.xstyle;var k=j(!1),l=k[0],m=k[1],n=b.fileObjectURL;if(!l&&n!=null)if(b.useCDNPreview)m(!0);else return i.jsx(c("BaseImage.react"),{draggable:!1,onError:function(){m(!0),f&&f(n)},onLoad:function(){g&&g(n)},ref:d("xplatToDOMRef").xplatToDOMRef(h),src:n,xstyle:a});if(l&&b.fileType==="PHOTO"&&b.state==="UPLOADED"){var o=b.uploadedImageURL;if(o!=null)return i.jsx(c("BaseImage.react"),{draggable:!1,onLoad:function(){g&&g(o)},ref:d("xplatToDOMRef").xplatToDOMRef(h),src:o,xstyle:a})}return i.jsx(c("StoriesCreatePhotoPreviewFallback.react"),{filename:b.file.name,frameWidth:e,percentComplete:b.state==="UPLOADING"?b.percentComplete:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesCreatePhotoPreviewItem.react",["FDSText.react","StoriesCreatePhotoPreviewFallback.react","StoriesCreateUploadingOrUploadedPhotoItem.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(15),e=a.attachment,f=a.frameWidth,g=a.onError,h=a.onLoad,j=a.ref;a=a.xstyle;switch(e.state){case"NEW":case"CLIENT_PROCESSING":case"CLIENT_PROCESSING_COMPLETE":var k;b[0]!==e.file.name||b[1]!==f?(k=i.jsx(c("StoriesCreatePhotoPreviewFallback.react"),{filename:e.file.name,frameWidth:f}),b[0]=e.file.name,b[1]=f,b[2]=k):k=b[2];return k;case"QUEUED":case"UPLOADING":case"UPLOADED":if(e.file!=null){b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==h||b[7]!==j||b[8]!==a?(k=i.jsx(c("StoriesCreateUploadingOrUploadedPhotoItem.react"),{attachment:e,frameWidth:f,onError:g,onLoad:h,ref:j,xstyle:a}),b[3]=e,b[4]=f,b[5]=g,b[6]=h,b[7]=j,b[8]=a,b[9]=k):k=b[9];return k}else return null;case"FAILED":b[10]!==e.error?(f=e.error!=null?i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsx(c("FDSText.react"),{color:"negative",type:"body4",children:e.error})]}):null,b[10]=e.error,b[11]=f):f=b[11];b[12]!==e.file.name||b[13]!==f?(g=i.jsxs(i.Fragment,{children:[e.file.name,f]}),b[12]=e.file.name,b[13]=f,b[14]=g):g=b[14];return g}return null}g["default"]=a}),98);
__d("StoriesCreatePhotoPreview_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesCreatePhotoPreview_data",selections:[{alias:null,args:null,concreteType:"StoriesCreateFormStickerButtonRender",kind:"LinkedField",name:"stories_create_sticker_button_render",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("StoriesCreatePreviewCTA.react",["StoriesCTAButton.react","StoriesCTAButtonLabels","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(5);a=a.ctaType;if(a==null)return null;var e,f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x1ey2m1c x78zum5 xl56j7k xx6bls6 x10l6tqk xh8yej3"},f=i.jsx("div",{className:"xzgd2jw x1ey2m1c xtijo5x x1o0tod x10l6tqk xcrr8yc"}),b[0]=e,b[1]=f):(e=b[0],f=b[1]);var g=c("StoriesCTAButtonLabels")[a];b[2]!==a||b[3]!==g?(e=i.jsxs("div",babelHelpers["extends"]({},e,{children:[f,i.jsx(c("StoriesCTAButton.react"),{title:g},a)]})),b[2]=a,b[3]=g,b[4]=e):e=b[4];return e}g["default"]=a}),98);
__d("StoriesCreateTextOverlaysRootQuery$Parameters",["StoriesCreateTextOverlaysRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("StoriesCreateTextOverlaysRootQuery_facebookRelayOperation"),metadata:{},name:"StoriesCreateTextOverlaysRootQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("StoriesCreateTextOverlaysRoot.entrypoint",["JSResourceForInteraction","StoriesCreateTextOverlaysRootQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{rootQueryReference:{parameters:b("StoriesCreateTextOverlaysRootQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("StoriesCreateTextOverlaysRoot.react").__setRef("StoriesCreateTextOverlaysRoot.entrypoint")};g["default"]=a}),98);
__d("StoriesCreateTextOverlayEntrypointContainer.react",["CometPlaceholder.react","StoriesCreateTextOverlaysRoot.entrypoint","react","react-compiler-runtime","react-relay/relay-hooks/LazyLoadEntryPointContainer_DEPRECATED.react","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={};function a(a){var b=d("react-compiler-runtime").c(2);a=a.textOverlays;var e=c("useCometRelayEntrypointContextualEnvironmentProvider")();a=a!=null&&a.overlays.length>0;if(a!==!0)return null;if(a){b[0]!==e?(a=i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(c("react-relay/relay-hooks/LazyLoadEntryPointContainer_DEPRECATED.react"),{entryPoint:c("StoriesCreateTextOverlaysRoot.entrypoint"),entryPointParams:j,environmentProvider:e,props:j})}),b[0]=e,b[1]=a):a=b[1];return a}return null}g["default"]=a}),98);
__d("useStoriesCreatePhotoPreviewBounds",["StoriesCreateViewStateDispatcherContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a,b,e){var f=d("react-compiler-runtime").c(6),g=i(c("StoriesCreateViewStateDispatcherContext")),h,k;f[0]!==g||f[1]!==b||f[2]!==e||f[3]!==a?(h=function(){if(b==null||e==null)return;var c={x:0,y:0};a%180===0?(a===0?c={x:(b.left-e.left)/e.width,y:(b.top-e.top)/e.height}:a===180&&(c={x:(e.right-b.right)/e.width,y:(e.bottom-b.bottom)/e.height}),g({bounds:{height:b.height/e.height,width:b.width/e.width,x:c.x,y:c.y},type:"photo_update_bounds"})):(a===90?c={x:(b.top-e.top)/e.height,y:(e.right-b.right)/e.width}:a===270&&(c={x:(e.bottom-b.bottom)/e.height,y:(b.left-e.left)/e.width}),g({bounds:{height:b.width/e.width,width:b.height/e.height,x:c.x,y:c.y},type:"photo_update_bounds"}))},k=[g,b,e,a],f[0]=g,f[1]=b,f[2]=e,f[3]=a,f[4]=h,f[5]=k):(h=f[4],k=f[5]);j(h,k)}g["default"]=a}),98);
__d("useStoriesCreatePhotoPreviewInput",["react","useGlobalEventListener"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function j(a,b,c,d,e){if(!b)return;b=a.target;b instanceof Node&&d instanceof Node&&c instanceof Node&&(!d.contains(b)&&!c.contains(b)&&e(!1))}function a(a,b,d,e){var f=i(function(c){j(c,a,e.current,d.current,b),c.preventDefault()},[d,e,a,b]),g=i(function(c){j(c,a,e.current,d.current,b)},[d,e,a,b]);c("useGlobalEventListener")("focus",f,{capture:!0});c("useGlobalEventListener")("click",g,{capture:!0})}g["default"]=a}),98);
__d("StoriesCreatePhotoPreview.react",["fbt","CometComponentWithKeyCommands.react","CometPlaceholder.react","CometPressable.react","JSResourceForInteraction","Locale","QPLUserFlow","RelayHooks","StoriesCreateBackground.react","StoriesCreateConstants","StoriesCreateDominantColorBg.react","StoriesCreatePhotoFooterControls.react","StoriesCreatePhotoFooterInstructions.react","StoriesCreatePhotoPreviewFrame.react","StoriesCreatePhotoPreviewFrameContext","StoriesCreatePhotoPreviewItem.react","StoriesCreatePhotoPreview_data.graphql","StoriesCreatePreviewCTA.react","StoriesCreateTextOverlayEntrypointContainer.react","StoriesCreateViewStateDispatcherContext","lazyLoadComponent","qpl","react","useMergeRefs","useResizeObserver","useStoriesCreateIsPanelHidden","useStoriesCreateObjectMove","useStoriesCreatePhotoFrame","useStoriesCreatePhotoPreviewBounds","useStoriesCreatePhotoPreviewInput","useThrottled","withStoriesCreateViewStatePart"],(function(a,b,c,d,e,f,g,aa){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,ba=e.useContext,l=e.useEffect,ca=e.useMemo,m=e.useRef,n=e.useState,o={image:{height:"x5yr21d",insetInlineStart:"xbudbmw",left:null,right:null,position:"x10l6tqk",transform:"xuuh30",$$css:!0},imageContainer:{height:"x5yr21d",insetInlineStart:"xbudbmw",left:null,right:null,position:"x10l6tqk",top:"xwa60dl",$$css:!0},imageRTL:{height:"x5yr21d",insetInlineStart:"xbudbmw",left:null,right:null,position:"x10l6tqk",transform:"xitnhlw",$$css:!0},pressable:{height:"x5yr21d",position:"x10l6tqk",$$css:!0},rotationCursor:{cursor:"x1ed109x",$$css:!0}},da=150,ea=h!==void 0?h:h=b("StoriesCreatePhotoPreview_data.graphql");function a(a){var b=a.composerSessionID,e=a.ctaLinkData,f=a.dataRef,g=a.displayedURI,h=a.isObjectRotating,i=a.isUploading,p=a.mediaAttachment,q=a.overlayRef,r=a.rotation,s=a.scale,t=a.stickerData;a=a.textOverlays;var u=c("useStoriesCreateIsPanelHidden")(),v=n(!1),w=v[0],fa=v[1],x=function(a){if(u)return;fa(a)},y=m(null),z=m(null);v=n(null);var A=v[0],B=v[1];v=n(null);var C=v[0],D=v[1],E=m([]),F=m(null);v=m(null);var G=m(null),H=m(2),I=m(null),J=m(.2),K=null;f=d("RelayHooks").useFragment(ea,f);f=Boolean(f==null?void 0:f.stories_create_sticker_button_render);var L=Boolean(t==null?void 0:t.shouldShowProductTypeahead)||Boolean(t==null?void 0:t.productSticker),M=Boolean(t==null?void 0:t.musicSticker);(M||f&&(((M=t==null?void 0:t.stickers.length)!=null?M:0)>0||L))&&(K=c("lazyLoadComponent")(c("JSResourceForInteraction")("StoriesCreateStickersRoot.react").__setRef("StoriesCreatePhotoPreview.react")));f=k(function(a,b){B(b.getBoundingClientRect())},[]);t=c("useResizeObserver")(f);M=c("useMergeRefs")(y,t);L=k(function(a,b){D(b.getBoundingClientRect())},[]);f=ca(function(){return{overlayRect:C}},[C]);t=c("useResizeObserver")(L);L=c("useMergeRefs")(z,t);t=g!=null;var N=ba(c("StoriesCreateViewStateDispatcherContext")),O=(a==null?void 0:a.editingID)!=null,P=d("StoriesCreateConstants").PHOTO_PREVIEW_DIMENSIONS.FOOTER_HEIGHT,Q=d("StoriesCreateConstants").PHOTO_PREVIEW_DIMENSIONS.HEADER_HEIGHT,R=c("useStoriesCreatePhotoFrame")(),ga=R.border,S=R.frameWidth;R=k(function(){if(q==null||(q==null?void 0:q.current)==null)return;var a=q==null?void 0:q.current;a instanceof HTMLElement&&D(a.getBoundingClientRect())},[q]);var T=c("useThrottled")(R,100);l(function(){window.addEventListener("resize",T);return function(){window.removeEventListener("resize",T)}},[T]);l(function(){c("QPLUserFlow").addPoint(c("qpl")._(13250512,"1219"),"Image story preview")},[b]);c("useStoriesCreatePhotoPreviewInput")(w,x,v,G);R=c("useStoriesCreateObjectMove")({autoAdjust:!0,buffer:{bottom:10,left:10,right:10,top:10},overlayRect:C,targetRect:A});var U=R.dx,V=R.dy;b=R.keyCommands;var ha=R.onBlur,ia=R.onPressDown;l(function(){N({dx:U,dy:V,type:"photo_update_offset"})},[N,U,V]);var W=k(function(a){N({type:"photo_update_scale",value:a})},[N]);l(function(){var a;B((a=y.current)==null?void 0:a.getBoundingClientRect());D((a=z.current)==null?void 0:a.getBoundingClientRect())},[U,V,r,s]);c("useStoriesCreatePhotoPreviewBounds")(r,A,C);var X=d("Locale").isRTL();l(function(){var a=I.current;a!=null&&(X||(a.scrollLeft=0),a.scrollTop=0)},[w,X]);R=k(function(a){N({type:"photo_update_uri",value:null}),F.current=null,E.current.push(a)},[N]);A=k(function(a){if(E.current.includes(a))return;N({type:"photo_update_uri",value:a})},[N]);l(function(){var a=y.current;if(g==null||E.current.includes(g)||a==null||F.current!=null||S===0)return;a=a.getBoundingClientRect();a.width>a.height&&W(S/a.width);S/a.width<.2&&(J.current=S/a.width*.8,H.current=S/a.width*4);F.current=!0},[g,S,W]);if(p==null||p.fileType!=="PHOTO")return null;var ja=X?"50%":"-50%",Y=!w,Z=Y?"solid rgba(24,25,26, 1.0)":"solid rgba(24,25,26, 0.5)",ka={height:"calc(100% - "+(P+Q)+"px",top:Q+"px"},$=null;w?$=j.jsx(c("StoriesCreatePhotoFooterControls.react"),{frameWidth:S,maxScale:H.current,minScale:J.current}):g!=null&&!O&&($=j.jsx(c("StoriesCreatePhotoFooterInstructions.react"),{}));return j.jsx("div",babelHelpers["extends"]({},{0:{className:"x6s0dn4 x15cqagf x1ey2m1c x78zum5 xtijo5x x1o0tod xl56j7k x71s49j x10l6tqk x13vifvy"},1:{className:"x6s0dn4 x15cqagf x1ey2m1c x78zum5 xtijo5x x1o0tod xl56j7k x10l6tqk x13vifvy x47corl"}}[!!i<<0],{children:j.jsxs(c("StoriesCreatePhotoPreviewFrameContext").Provider,{value:f,children:[j.jsxs("div",{className:{0:"x6s0dn4 x15mokao x1ga7v0g x16uus16 xbiv7yw x78zum5 xl56j7k x10l6tqk xh8yej3",1:"x6s0dn4 x78zum5 xl56j7k x10l6tqk xh8yej3 x1obq294 x5a5i1n xde0f50 x15x8krk x6ikm8r x10wlt62"}[!!Y<<0],ref:I,style:babelHelpers["extends"]({},ka,{width:Y?S+"px":void 0}),children:[j.jsx(c("StoriesCreateBackground.react"),{}),j.jsx(c("StoriesCreateDominantColorBg.react"),{frameWidth:S,rounded:Y}),j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:b,xstyle:o.imageContainer,children:j.jsx("div",{className:"x5yr21d x10l6tqk",onFocus:function(a){a.preventDefault(),a.target.focus({preventScroll:!0})},onMouseDown:function(a){a.preventDefault()},onWheel:function(a){w&&W(Math.min(Math.max(s-a.deltaY/da,J.current),H.current))},style:{transform:"translate(calc("+ja+" + "+U+"px), calc(-50% + "+V+"px)) rotate("+r+"deg) scale("+s+")"},children:j.jsx(c("CometPressable.react"),{"aria-label":aa._(/*BTDS*/"Uploaded image drag handler"),disabled:!t||u,onFocusIn:function(a){a.target.focus({preventScroll:!0}),x(!0)},onFocusOut:function(){ha()},onPressIn:function(a){x(!0),ia(a)},overlayDisabled:!0,ref:G,xstyle:[o.pressable,h?o.rotationCursor:{}],children:j.jsx(c("StoriesCreatePhotoPreviewItem.react"),{attachment:p,frameWidth:S,onError:R,onLoad:A,ref:M,xstyle:X?o.imageRTL:o.image})})})}),j.jsx(c("StoriesCreatePhotoPreviewFrame.react"),{frameWidth:S,ref:L,rounded:Y}),j.jsx(c("StoriesCreatePreviewCTA.react"),{ctaType:e.ctaType})]}),!u&&j.jsx("div",{className:"x15cqagf x1ey2m1c x78zum5 xl56j7k x10l6tqk xh8yej3",ref:v,style:{height:P+"px"},children:$}),j.jsxs("div",{className:{0:"x10l6tqk",2:"x10l6tqk x47corl",1:"x10l6tqk x18l40ae x6ikm8r x10wlt62",3:"x10l6tqk x47corl x18l40ae x6ikm8r x10wlt62"}[!!!O<<1|!!O<<0],onMouseDown:function(a){if(!O)return;a.preventDefault();a.stopPropagation()},style:babelHelpers["extends"]({},ka,{width:S+"px"}),children:[q!=null&&j.jsxs("div",{className:"x5yr21d x10l6tqk xh8yej3",ref:q,children:[j.jsx(c("StoriesCreateTextOverlayEntrypointContainer.react"),{textOverlays:a}),K!=null&&j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(K,{})})]}),j.jsx("div",{className:{0:"x5yr21d xbudbmw x1snv3wq x1j7381n x18ooxip x1uh6cse x47corl x10l6tqk xuuh30 xh8yej3",1:"x5yr21d xbudbmw x1snv3wq x1j7381n x18ooxip x1uh6cse x47corl x10l6tqk xh8yej3 xitnhlw"}[!!X<<0],style:{borderLeft:ga+"px "+Z,borderRight:ga+"px "+Z,borderTop:Q+"px "+Z,top:"-"+Q+"px"}})]})]})}))}a.displayName=a.name+" [from "+f.id+"]";e=c("withStoriesCreateViewStatePart")(a,function(a){var b;return{composerSessionID:a.composerSessionID,ctaLinkData:a.ctaLinkData,displayedURI:(b=a.photoData)==null?void 0:b.displayedURI,isObjectRotating:a.isObjectRotating,isUploading:a.isUploading,mediaAttachment:(b=a.mediaAttachments)==null?void 0:b[0],overlayRef:a==null?void 0:a.overlayRef,rotation:(b=(b=a.photoData)==null?void 0:b.rotation)!=null?b:0,scale:(b=(b=a.photoData)==null?void 0:b.scale)!=null?b:1,stickerData:a.stickerData,textOverlays:a.textOverlays}});g["default"]=e}),226);