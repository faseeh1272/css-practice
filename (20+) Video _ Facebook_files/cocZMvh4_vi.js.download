;/*FB_PKG_DELIM*/

__d("CometMessengerReshareUtil",["FBLogger","MWChatSearchResultType","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case c("MWChatSearchResultType").GROUP:return"GROUP";case c("MWChatSearchResultType").USER:return"USER";case c("MWChatSearchResultType").PAGE:return"PAGE";default:c("FBLogger")("fb_social_experience_web_sharing").mustfix("Got an unexpected resultType:%s",a);return"USER"}}function b(){if(c("qex")._("564")===!0)return!0;else return c("qex")._("121")===!0}g.getTargetTypeFromTypenameForLightSpeed=a;g.isXMAFeedPostShareEnabled=b}),98);
__d("LexicalLinkPlugin",["cr:2067"],(function(a,b,c,d,e,f){e.exports=b("cr:2067")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<5f58a9c8e53217b2054271711b4075ed>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalLinkPlugin.prod",["LexicalComposerContext","LexicalExtension","LexicalLink","react"],(function $module_LexicalLinkPlugin_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _require_closure_react;var t=_require_closure_react||(_require_closure_react=require("react"));exports.LinkPlugin=function(_ref){var n=_ref.validateUrl,o=_ref.attributes;var _i$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),s=_i$useLexicalComposer[0];return t.useEffect(function(){if(!s.hasNodes([require("LexicalLink").LinkNode]))throw new Error("LinkPlugin: LinkNode not registered on editor");}),t.useEffect(function(){return require("LexicalLink").registerLink(s,require("LexicalExtension").namedSignals({attributes:o,validateUrl:n}));},[s,n,o]),null;};}),null);
__d("LexicalTable",["cr:1950"],(function(a,b,c,d,e,f){e.exports=b("cr:1950")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<c452046fa60a3f01222e1746d0f7725c>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalTable.prod",["Lexical","LexicalClipboard","LexicalExtension","LexicalUtils"],(function $module_LexicalTable_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var r=/^(\d+(?:\.\d+)?)px$/,l={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1};var _s15=function(_t$ElementNode){function s(e,t,n,o){var _this;if(e===void 0){e=l.NO_STATUS;}if(t===void 0){t=1;}_this=_t$ElementNode.call(this,o)||this,_this.__colSpan=t,_this.__rowSpan=1,_this.__headerState=e,_this.__width=n,_this.__backgroundColor=null,_this.__verticalAlign=void 0;return _this;}babelHelpers.inheritsLoose(s,_t$ElementNode);s.getType=function getType(){return"tablecell";};s.clone=function clone(e){return new s(e.__headerState,e.__colSpan,e.__width,e.__key);};var _proto=s.prototype;_proto.afterCloneFrom=function afterCloneFrom(e){_t$ElementNode.prototype.afterCloneFrom.call(this,e),this.__rowSpan=e.__rowSpan,this.__backgroundColor=e.__backgroundColor,this.__verticalAlign=e.__verticalAlign;};s.importDOM=function importDOM(){return{td:function td(e){return{conversion:a,priority:0};},th:function th(e){return{conversion:a,priority:0};}};};s.importJSON=function importJSON(e){return c().updateFromJSON(e);};_proto.updateFromJSON=function updateFromJSON(e){return _t$ElementNode.prototype.updateFromJSON.call(this,e).setHeaderStyles(e.headerState).setColSpan(e.colSpan||1).setRowSpan(e.rowSpan||1).setWidth(e.width||void 0).setBackgroundColor(e.backgroundColor||null).setVerticalAlign(e.verticalAlign||void 0);};_proto.createDOM=function createDOM(t){var n=document.createElement(this.getTag());return this.__width&&(n.style.width=this.__width+"px"),this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(n.style.backgroundColor=this.__backgroundColor),i(this.__verticalAlign)&&(n.style.verticalAlign=this.__verticalAlign),require("LexicalUtils").addClassNamesToElement(n,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),n;};_proto.exportDOM=function exportDOM(e){var n=_t$ElementNode.prototype.exportDOM.call(this,e);if(require("Lexical").isHTMLElement(n.element)){var _e2=n.element;_e2.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),_e2.style.border="1px solid black",this.__colSpan>1&&(_e2.colSpan=this.__colSpan),this.__rowSpan>1&&(_e2.rowSpan=this.__rowSpan),_e2.style.width=(this.getWidth()||75)+"px",_e2.style.verticalAlign=this.getVerticalAlign()||"top",_e2.style.textAlign="start",null===this.__backgroundColor&&this.hasHeader()&&(_e2.style.backgroundColor="#f2f3f5");}return n;};_proto.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_t$ElementNode.prototype.exportJSON.call(this),i(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},{backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()});};_proto.getColSpan=function getColSpan(){return this.getLatest().__colSpan;};_proto.setColSpan=function setColSpan(e){var t=this.getWritable();return t.__colSpan=e,t;};_proto.getRowSpan=function getRowSpan(){return this.getLatest().__rowSpan;};_proto.setRowSpan=function setRowSpan(e){var t=this.getWritable();return t.__rowSpan=e,t;};_proto.getTag=function getTag(){return this.hasHeader()?"th":"td";};_proto.setHeaderStyles=function setHeaderStyles(e,t){if(t===void 0){t=l.BOTH;}var n=this.getWritable();return n.__headerState=e&t|n.__headerState&~t,n;};_proto.getHeaderStyles=function getHeaderStyles(){return this.getLatest().__headerState;};_proto.setWidth=function setWidth(e){var t=this.getWritable();return t.__width=e,t;};_proto.getWidth=function getWidth(){return this.getLatest().__width;};_proto.getBackgroundColor=function getBackgroundColor(){return this.getLatest().__backgroundColor;};_proto.setBackgroundColor=function setBackgroundColor(e){var t=this.getWritable();return t.__backgroundColor=e,t;};_proto.getVerticalAlign=function getVerticalAlign(){return this.getLatest().__verticalAlign;};_proto.setVerticalAlign=function setVerticalAlign(e){var t=this.getWritable();return t.__verticalAlign=e||void 0,t;};_proto.toggleHeaderStyle=function toggleHeaderStyle(e){var t=this.getWritable();return(t.__headerState&e)===e?t.__headerState-=e:t.__headerState+=e,t;};_proto.hasHeaderState=function hasHeaderState(e){return(this.getHeaderStyles()&e)===e;};_proto.hasHeader=function hasHeader(){return this.getLatest().__headerState!==l.NO_STATUS;};_proto.updateDOM=function updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor||e.__verticalAlign!==this.__verticalAlign;};_proto.isShadowRoot=function isShadowRoot(){return!0;};_proto.collapseAtStart=function collapseAtStart(){return!0;};_proto.canBeEmpty=function canBeEmpty(){return!1;};_proto.canIndent=function canIndent(){return!1;};return s;}(require("Lexical").ElementNode);function i(e){return"middle"===e||"bottom"===e;}function a(e){var n=e,o=e.nodeName.toLowerCase();var s;r.test(n.style.width)&&(s=parseFloat(n.style.width));var a=c("th"===o?l.ROW:l.NO_STATUS,n.colSpan,s);a.__rowSpan=n.rowSpan;var u=n.style.backgroundColor;""!==u&&(a.__backgroundColor=u);var d=n.style.verticalAlign;i(d)&&(a.__verticalAlign=d);var h=n.style,g=(h&&h.textDecoration||"").split(" "),f="700"===h.fontWeight||"bold"===h.fontWeight,m=g.includes("line-through"),C="italic"===h.fontStyle,p=g.includes("underline");return{after:function after(e){var n=[];var o=null;var r=function r(){if(o){var _e3=o.getFirstChild();require("Lexical").$isLineBreakNode(_e3)&&1===o.getChildrenSize()&&_e3.remove();}};for(var _l of e)require("Lexical").$isInlineElementOrDecoratorNode(_l)||require("Lexical").$isTextNode(_l)||require("Lexical").$isLineBreakNode(_l)?(require("Lexical").$isTextNode(_l)&&(f&&_l.toggleFormat("bold"),m&&_l.toggleFormat("strikethrough"),C&&_l.toggleFormat("italic"),p&&_l.toggleFormat("underline")),o?o.append(_l):(o=require("Lexical").$createParagraphNode().append(_l),n.push(o))):(n.push(_l),r(),o=null);return r(),0===n.length&&n.push(require("Lexical").$createParagraphNode()),n;},node:a};}function c(e,n,o){if(e===void 0){e=l.NO_STATUS;}if(n===void 0){n=1;}return require("Lexical").$applyNodeReplacement(new _s15(e,n,o));}function u(e){return e instanceof _s15;}var d=require("Lexical").createCommand("INSERT_TABLE_COMMAND");function h(e){var n=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams();o.append("code",e);for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}for(var _e4 of t)o.append("v",_e4);throw n.search=o.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}var _g8=function(_t$ElementNode2){function g(e,t){var _this2;_this2=_t$ElementNode2.call(this,t)||this,_this2.__height=e;return _this2;}babelHelpers.inheritsLoose(g,_t$ElementNode2);g.getType=function getType(){return"tablerow";};g.clone=function clone(e){return new g(e.__height,e.__key);};g.importDOM=function importDOM(){return{tr:function tr(e){return{conversion:f,priority:0};}};};g.importJSON=function importJSON(e){return m().updateFromJSON(e);};var _proto2=g.prototype;_proto2.updateFromJSON=function updateFromJSON(e){return _t$ElementNode2.prototype.updateFromJSON.call(this,e).setHeight(e.height);};_proto2.exportJSON=function exportJSON(){var e=this.getHeight();return babelHelpers["extends"]({},_t$ElementNode2.prototype.exportJSON.call(this),void 0===e?void 0:{height:e});};_proto2.createDOM=function createDOM(t){var n=document.createElement("tr");return this.__height&&(n.style.height=this.__height+"px"),require("LexicalUtils").addClassNamesToElement(n,t.theme.tableRow),n;};_proto2.extractWithChild=function extractWithChild(e,t,n){return"html"===n;};_proto2.isShadowRoot=function isShadowRoot(){return!0;};_proto2.setHeight=function setHeight(e){var t=this.getWritable();return t.__height=e,t;};_proto2.getHeight=function getHeight(){return this.getLatest().__height;};_proto2.updateDOM=function updateDOM(e){return e.__height!==this.__height;};_proto2.canBeEmpty=function canBeEmpty(){return!1;};_proto2.canIndent=function canIndent(){return!1;};return g;}(require("Lexical").ElementNode);function f(t){var n=t;var o;return r.test(n.style.height)&&(o=parseFloat(n.style.height)),{after:function after(t){return require("LexicalUtils").$descendantsMatching(t,u);},node:m(o)};}function m(e){return require("Lexical").$applyNodeReplacement(new _g8(e));}function C(e){return e instanceof _g8;}var p="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,_=p&&"documentMode"in document?document.documentMode:null,S=p&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);function N(e,n,o){if(o===void 0){o=!0;}var r=He();for(var _s=0;_s<e;_s++){var _e5=m();for(var _r=0;_r<n;_r++){var _n=l.NO_STATUS;"object"==typeof o?(0===_s&&o.rows&&(_n|=l.ROW),0===_r&&o.columns&&(_n|=l.COLUMN)):o&&(0===_s&&(_n|=l.ROW),0===_r&&(_n|=l.COLUMN));var _i=c(_n),_a=require("Lexical").$createParagraphNode();_a.append(require("Lexical").$createTextNode()),_i.append(_a),_e5.append(_i);}r.append(_e5);}return r;}function w(t){var n=require("LexicalUtils").$findMatchingParent(t,function(e){return C(e);});if(C(n))return n;throw new Error("Expected table cell to be inside of table row.");}function b(t){var n=require("LexicalUtils").$findMatchingParent(t,function(e){return We(e);});if(We(n))return n;throw new Error("Expected table cell to be inside of table.");}function T(e,t){var n=b(e),_n$getCordsFromCellNo=n.getCordsFromCellNode(e,t),o=_n$getCordsFromCellNo.x,r=_n$getCordsFromCellNo.y;return{above:n.getCellNodeFromCords(o,r-1,t),below:n.getCellNodeFromCords(o,r+1,t),left:n.getCellNodeFromCords(o-1,r,t),right:n.getCellNodeFromCords(o+1,r,t)};}p&&"InputEvent"in window&&!_&&new window.InputEvent("input");var $=function $(e,t){return e===l.BOTH||e===t?t:l.NO_STATUS;};function y(e){if(e===void 0){e=!0;}var n=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(n)||J(n)||h(188);var o=n.anchor.getNode(),r=n.focus.getNode(),_z=z(o),l=_z[0],_z2=z(r),s=_z2[0],i=_z2[2],_H=H(i,s,l),a=_H[1],c=_H[2],u=c.startRow,d=a.startRow;return e?M(u+l.__rowSpan>d+s.__rowSpan?l:s,!0):M(d<u?s:l,!1);}var R=y;function M(e,n){if(n===void 0){n=!0;}var _z3=z(e),o=_z3[2],_H2=H(o,e,e),r=_H2[0],s=_H2[1],i=r[0].length,a=s.startRow;var u=null;if(n){var _n2=a+e.__rowSpan-1,_s2=r[_n2],_d=m();for(var _e6=0;_e6<i;_e6++){var _s2$_e=_s2[_e6],_o=_s2$_e.cell,_r2=_s2$_e.startRow;if(_r2+_o.__rowSpan-1<=_n2){var _n3=_s2[_e6].cell.__headerState,_o2=$(_n3,l.COLUMN);_d.append(c(_o2).append(require("Lexical").$createParagraphNode()));}else _o.setRowSpan(_o.__rowSpan+1);}var _g=o.getChildAtIndex(_n2);C(_g)||h(256),_g.insertAfter(_d),u=_d;}else{var _e7=a,_n4=r[_e7],_s3=m();for(var _o3=0;_o3<i;_o3++){var _n4$_o=_n4[_o3],_r3=_n4$_o.cell,_i2=_n4$_o.startRow;if(_i2===_e7){var _e8=_n4[_o3].cell.__headerState,_r4=$(_e8,l.COLUMN);_s3.append(c(_r4).append(require("Lexical").$createParagraphNode()));}else _r3.setRowSpan(_r3.__rowSpan+1);}var _d2=o.getChildAtIndex(_e7);C(_d2)||h(257),_d2.insertBefore(_s3),u=_s3;}return u;}function x(e){if(e===void 0){e=!0;}var n=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(n)||J(n)||h(188);var o=n.anchor.getNode(),r=n.focus.getNode(),_z4=z(o),l=_z4[0],_z5=z(r),s=_z5[0],i=_z5[2],_H3=H(i,s,l),a=_H3[1],c=_H3[2],u=c.startColumn,d=a.startColumn;return e?O(u+l.__colSpan>d+s.__colSpan?l:s,!0):O(d<u?s:l,!1);}var E=x;function O(e,n,o){if(n===void 0){n=!0;}if(o===void 0){o=!0;}var _z6=z(e),r=_z6[2],_H4=H(r,e,e),s=_H4[0],i=_H4[1],a=s.length,u=i.startColumn,d=n?u+e.__colSpan-1:u-1,g=r.getFirstChild();C(g)||h(120);var f=null;function m(e){if(e===void 0){e=l.NO_STATUS;}var n=c(e).append(require("Lexical").$createParagraphNode());return null===f&&(f=n),n;}var p=g;e:for(var _e9=0;_e9<a;_e9++){if(0!==_e9){var _e0=p.getNextSibling();C(_e0)||h(121),p=_e0;}var _t=s[_e9],_n5=_t[d<0?0:d].cell.__headerState,_o4=$(_n5,l.ROW);if(d<0){K(p,m(_o4));continue;}var _t$d=_t[d],_r5=_t$d.cell,_i3=_t$d.startColumn,_a2=_t$d.startRow;if(_i3+_r5.__colSpan-1<=d){var _n6=_r5,_l2=_a2,_s4=d;for(;_l2!==_e9&&_n6.__rowSpan>1;){if(_s4-=_r5.__colSpan,!(_s4>=0)){p.append(m(_o4));continue e;}{var _t$_s=_t[_s4],_e1=_t$_s.cell,_o5=_t$_s.startRow;_n6=_e1,_l2=_o5;}}_n6.insertAfter(m(_o4));}else _r5.setColSpan(_r5.__colSpan+1);}null!==f&&o&&D(f);var _=r.getColWidths();if(_){var _e10=[].concat(_),_t2=d<0?0:d,_n7=_e10[_t2];_e10.splice(_t2,0,_n7),r.setColWidths(_e10);}return f;}function A(){var e=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(e)||J(e)||h(188);var _ref=e.isBackward()?[e.focus.getNode(),e.anchor.getNode()]:[e.anchor.getNode(),e.focus.getNode()],n=_ref[0],o=_ref[1],_z7=z(n),r=_z7[0],l=_z7[2],_z8=z(o),s=_z8[0],_H5=H(l,r,s),i=_H5[0],a=_H5[1],c=_H5[2],u=a.startRow,d=c.startRow,g=d+s.__rowSpan-1;if(i.length===g-u+1)return void l.remove();var f=i[0].length,m=i[g+1],p=l.getChildAtIndex(g+1);for(var _e11=g;_e11>=u;_e11--){for(var _t3=f-1;_t3>=0;_t3--){var _i$_e11$_t=i[_e11][_t3],_n8=_i$_e11$_t.cell,_o6=_i$_e11$_t.startRow,_r6=_i$_e11$_t.startColumn;if(_r6===_t3){if(_o6<u||_o6+_n8.__rowSpan-1>g){var _e12=Math.max(_o6,u),_t4=Math.min(_n8.__rowSpan+_o6-1,g),_r7=_e12<=_t4?_t4-_e12+1:0;_n8.setRowSpan(_n8.__rowSpan-_r7);}if(_o6>=u&&_o6+_n8.__rowSpan-1>g&&_e11===g){null===p&&h(122);var _o7=null;for(var _n9=0;_n9<_t3;_n9++){var _t5=m[_n9],_r8=_t5.cell;_t5.startRow===_e11+1&&(_o7=_r8),_r8.__colSpan>1&&(_n9+=_r8.__colSpan-1);}null===_o7?K(p,_n8):_o7.insertAfter(_n8);}}}var _t6=l.getChildAtIndex(_e11);C(_t6)||h(206,String(_e11)),_t6.remove();}if(void 0!==m){var _e13=m[0].cell;D(_e13);}else{var _e14=i[u-1],_t7=_e14[0].cell;D(_t7);}}var v=A;function F(){var e=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(e)||J(e)||h(188);var n=e.anchor.getNode(),o=e.focus.getNode(),_z9=z(n),r=_z9[0],l=_z9[2],_z0=z(o),s=_z0[0],_H6=H(l,r,s),i=_H6[0],a=_H6[1],c=_H6[2],u=a.startColumn,d=c.startRow,g=c.startColumn,f=Math.min(u,g),m=Math.max(u+r.__colSpan-1,g+s.__colSpan-1),C=m-f+1;if(i[0].length===m-f+1)return l.selectPrevious(),void l.remove();var p=i.length;for(var _e15=0;_e15<p;_e15++)for(var _t8=f;_t8<=m;_t8++){var _i$_e15$_t=i[_e15][_t8],_n0=_i$_e15$_t.cell,_o8=_i$_e15$_t.startColumn;if(_o8<f){if(_t8===f){var _e16=f-_o8;_n0.setColSpan(_n0.__colSpan-Math.min(C,_n0.__colSpan-_e16));}}else if(_o8+_n0.__colSpan-1>m){if(_t8===m){var _e17=m-_o8+1;_n0.setColSpan(_n0.__colSpan-_e17);}}else _n0.remove();}var _=i[d],S=u>g?_[u+r.__colSpan]:_[g+s.__colSpan];if(void 0!==S){var _e18=S.cell;D(_e18);}else{var _e19=g<u?_[g-1]:_[u-1],_t9=_e19.cell;D(_t9);}var N=l.getColWidths();if(N){var _e20=[].concat(N);_e20.splice(f,C),l.setColWidths(_e20);}}var P=F;function D(e){var t=e.getFirstDescendant();null==t?e.selectStart():t.getParentOrThrow().selectStart();}function K(e,t){var n=e.getFirstChild();null!==n?n.insertBefore(t):e.append(t);}function I(e){if(0===e.length)return null;var n=b(e[0]),_W=W(n,null,null),o=_W[0];var r=1/0,l=-1/0,s=1/0,i=-1/0;var a=new Set();for(var _t0 of o){var _loop=function _loop(_n1){if(!_n1||!_n1.cell)return 1;var t=_n1.cell.getKey();if(!a.has(t)&&e.some(function(e){return e.is(_n1.cell);})){a.add(t);var _e21=_n1.startRow,_o9=_n1.startColumn,_c=_n1.cell.__rowSpan||1,_u=_n1.cell.__colSpan||1;r=Math.min(r,_e21),l=Math.max(l,_e21+_c-1),s=Math.min(s,_o9),i=Math.max(i,_o9+_u-1);}};for(var _n1 of _t0){if(_loop(_n1))continue;}}if(r===1/0||s===1/0)return null;var c=l-r+1,u=i-s+1,d=o[r][s];if(!d.cell)return null;var h=d.cell;h.setColSpan(u),h.setRowSpan(c);var g=new Set([h.getKey()]);for(var _e22=r;_e22<=l;_e22++)for(var _t1=s;_t1<=i;_t1++){var _n10=o[_e22][_t1];if(!_n10.cell)continue;var _r9=_n10.cell,_l3=_r9.getKey();if(!g.has(_l3)){g.add(_l3);L(_r9)||h.append.apply(h,_r9.getChildren()),_r9.remove();}}return 0===h.getChildrenSize()&&h.append(require("Lexical").$createParagraphNode()),h;}function L(e){if(1!==e.getChildrenSize())return!1;var n=e.getFirstChildOrThrow();return!(!require("Lexical").$isParagraphNode(n)||!n.isEmpty());}function k(e){var _z1=z(e),n=_z1[0],o=_z1[1],r=_z1[2],s=n.__colSpan,i=n.__rowSpan;if(1===s&&1===i)return;var _H7=H(r,n,n),a=_H7[0],u=_H7[1],d=u.startColumn,g=u.startRow,f=n.__headerState&l.COLUMN,m=Array.from({length:s},function(e,t){var n=f;for(var _e23=0;0!==n&&_e23<a.length;_e23++)n&=a[_e23][t+d].cell.__headerState;return n;}),p=n.__headerState&l.ROW,_=Array.from({length:i},function(e,t){var n=p;for(var _e24=0;0!==n&&_e24<a[0].length;_e24++)n&=a[t+g][_e24].cell.__headerState;return n;});if(s>1){for(var _e25=1;_e25<s;_e25++)n.insertAfter(c(m[_e25]|_[0]).append(require("Lexical").$createParagraphNode()));n.setColSpan(1);}if(i>1){var _e26;for(var _n11=1;_n11<i;_n11++){var _r0=g+_n11,_l4=a[_r0];_e26=(_e26||o).getNextSibling(),C(_e26)||h(125);var _i4=null;for(var _e27=0;_e27<d;_e27++){var _t10=_l4[_e27],_n12=_t10.cell;_t10.startRow===_r0&&(_i4=_n12),_n12.__colSpan>1&&(_e27+=_n12.__colSpan-1);}if(null===_i4)for(var _o0=s-1;_o0>=0;_o0--)K(_e26,c(m[_o0]|_[_n11]).append(require("Lexical").$createParagraphNode()));else for(var _e28=s-1;_e28>=0;_e28--)_i4.insertAfter(c(m[_e28]|_[_n11]).append(require("Lexical").$createParagraphNode()));}n.setRowSpan(1);}}function H(e,t,n){var _W2=W(e,t,n),o=_W2[0],r=_W2[1],l=_W2[2];return null===r&&h(207),null===l&&h(208),[o,r,l];}function W(e,t,n){var o=[];var r=null,l=null;function s(e){var t=o[e];return void 0===t&&(o[e]=t=[]),t;}var i=e.getChildren();for(var _e29=0;_e29<i.length;_e29++){var _o1=i[_e29];C(_o1)||h(209);var _a3=s(_e29);for(var _c2=_o1.getFirstChild(),_d3=0;null!=_c2;_c2=_c2.getNextSibling()){for(u(_c2)||h(147);void 0!==_a3[_d3];)_d3++;var _o10={cell:_c2,startColumn:_d3,startRow:_e29},_c3=_c2,_g2=_c3.__rowSpan,_f=_c3.__colSpan;for(var _t11=0;_t11<_g2&&!(_e29+_t11>=i.length);_t11++){var _n13=s(_e29+_t11);for(var _e30=0;_e30<_f;_e30++)_n13[_d3+_e30]=_o10;}null!==t&&null===r&&t.is(_c2)&&(r=_o10),null!==n&&null===l&&n.is(_c2)&&(l=_o10);}}return[o,r,l];}function z(t){var n;if(t instanceof _s15)n=t;else if("__type"in t){var _o11=require("LexicalUtils").$findMatchingParent(t,u);u(_o11)||h(148),n=_o11;}else{var _o12=require("LexicalUtils").$findMatchingParent(t.getNode(),u);u(_o12)||h(148),n=_o12;}var o=n.getParent();C(o)||h(149);var r=o.getParent();return We(r)||h(210),[n,o,r];}function B(e,t,n){var o,r=Math.min(t.startColumn,n.startColumn),l=Math.min(t.startRow,n.startRow),s=Math.max(t.startColumn+t.cell.__colSpan-1,n.startColumn+n.cell.__colSpan-1),i=Math.max(t.startRow+t.cell.__rowSpan-1,n.startRow+n.cell.__rowSpan-1);do{o=!1;for(var _t12=0;_t12<e.length;_t12++)for(var _n14=0;_n14<e[0].length;_n14++){var _a4=e[_t12][_n14];if(!_a4)continue;var _c4=_a4.startColumn+_a4.cell.__colSpan-1,_u2=_a4.startRow+_a4.cell.__rowSpan-1,_d4=_a4.startColumn<=s&&_c4>=r,_h=_a4.startRow<=i&&_u2>=l;if(_d4&&_h){var _e31=Math.min(r,_a4.startColumn),_t13=Math.max(s,_c4),_n15=Math.min(l,_a4.startRow),_d5=Math.max(i,_u2);_e31===r&&_t13===s&&_n15===l&&_d5===i||(r=_e31,s=_t13,l=_n15,i=_d5,o=!0);}}}while(o);return{maxColumn:s,maxRow:i,minColumn:r,minRow:l};}function Y(e){var _z10=z(e),t=_z10[0],n=_z10[2],o=n.getChildren(),r=o.length,l=o[0].getChildren().length,s=new Array(r);for(var _e32=0;_e32<r;_e32++)s[_e32]=new Array(l);for(var _e33=0;_e33<r;_e33++){var _n16=o[_e33].getChildren();var _r1=0;for(var _o13=0;_o13<_n16.length;_o13++){for(;s[_e33][_r1];)_r1++;var _l5=_n16[_o13],_i5=_l5.__rowSpan||1,_a5=_l5.__colSpan||1;for(var _t14=0;_t14<_i5;_t14++)for(var _n17=0;_n17<_a5;_n17++)s[_e33+_t14][_r1+_n17]=_l5;if(t===_l5)return{colSpan:_a5,columnIndex:_r1,rowIndex:_e33,rowSpan:_i5};_r1+=_a5;}}return null;}function U(t){var _map=["anchor","focus"].map(function(n){var o=t[n].getNode(),r=require("LexicalUtils").$findMatchingParent(o,u);u(r)||h(238,n,o.getKey(),o.getType());var l=r.getParent();C(l)||h(239,n);var s=l.getParent();return We(s)||h(240,n),[o,r,l,s];}),_map$=_map[0],n=_map$[0],o=_map$[1],r=_map$[2],l=_map$[3],_map$2=_map[1],s=_map$2[0],i=_map$2[1],a=_map$2[2],c=_map$2[3];return l.is(c)||h(241),{anchorCell:o,anchorNode:n,anchorRow:r,anchorTable:l,focusCell:i,focusNode:s,focusRow:a,focusTable:c};}var _X=function(){function X(e,t,n){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e;}var _proto3=X.prototype;_proto3.getStartEndPoints=function getStartEndPoints(){return[this.anchor,this.focus];};_proto3.isValid=function isValid(){return"root"!==this.tableKey&&"root"!==this.anchor.key&&"element"===this.anchor.type&&"root"!==this.focus.key&&"element"===this.focus.type;};_proto3.isBackward=function isBackward(){return this.focus.isBefore(this.anchor);};_proto3.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto3.setCachedNodes=function setCachedNodes(e){this._cachedNodes=e;};_proto3.is=function is(e){return J(e)&&this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus);};_proto3.set=function set(e,t,n){this.dirty=this.dirty||e!==this.tableKey||t!==this.anchor.key||n!==this.focus.key,this.tableKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null;};_proto3.clone=function clone(){return new X(this.tableKey,require("Lexical").$createPoint(this.anchor.key,this.anchor.offset,this.anchor.type),require("Lexical").$createPoint(this.focus.key,this.focus.offset,this.focus.type));};_proto3.isCollapsed=function isCollapsed(){return!1;};_proto3.extract=function extract(){return this.getNodes();};_proto3.insertRawText=function insertRawText(e){};_proto3.insertText=function insertText(){};_proto3.hasFormat=function hasFormat(e){var n=0;this.getNodes().filter(u).forEach(function(e){var o=e.getFirstChild();require("Lexical").$isParagraphNode(o)&&(n|=o.getTextFormat());});var o=require("Lexical").TEXT_TYPE_TO_FORMAT[e];return 0!==(n&o);};_proto3.insertNodes=function insertNodes(e){var n=this.focus.getNode();require("Lexical").$isElementNode(n)||h(151);require("Lexical").$normalizeSelection__EXPERIMENTAL(n.select(0,n.getChildrenSize())).insertNodes(e);};_proto3.getShape=function getShape(){var _U=U(this),e=_U.anchorCell,t=_U.focusCell,n=Y(e);null===n&&h(153);var o=Y(t);null===o&&h(155);var r=Math.min(n.columnIndex,o.columnIndex),l=Math.max(n.columnIndex+n.colSpan-1,o.columnIndex+o.colSpan-1),s=Math.min(n.rowIndex,o.rowIndex),i=Math.max(n.rowIndex+n.rowSpan-1,o.rowIndex+o.rowSpan-1);return{fromX:Math.min(r,l),fromY:Math.min(s,i),toX:Math.max(r,l),toY:Math.max(s,i)};};_proto3.getNodes=function getNodes(){if(!this.isValid())return[];var e=this._cachedNodes;if(null!==e)return e;var _U2=U(this),n=_U2.anchorTable,o=_U2.anchorCell,r=_U2.focusCell,l=r.getParents()[1];if(l!==n){if(n.isParentOf(r)){var _e34=l.getParent();null==_e34&&h(159),this.set(this.tableKey,r.getKey(),_e34.getKey());}else{var _e35=n.getParent();null==_e35&&h(158),this.set(this.tableKey,_e35.getKey(),r.getKey());}return this.getNodes();}var _H8=H(n,o,r),s=_H8[0],i=_H8[1],a=_H8[2],_B=B(s,i,a),c=_B.minColumn,u=_B.maxColumn,d=_B.minRow,g=_B.maxRow,f=new Map([[n.getKey(),n]]);var m=null;for(var _e36=d;_e36<=g;_e36++)for(var _t15=c;_t15<=u;_t15++){var _n18=s[_e36][_t15].cell,_o14=_n18.getParent();C(_o14)||h(160),_o14!==m&&(f.set(_o14.getKey(),_o14),m=_o14),f.has(_n18.getKey())||j(_n18,function(e){f.set(e.getKey(),e);});}var p=Array.from(f.values());return require("Lexical").isCurrentlyReadOnlyMode()||(this._cachedNodes=p),p;};_proto3.getTextContent=function getTextContent(){var e=this.getNodes().filter(function(e){return u(e);});var t="";for(var _n19=0;_n19<e.length;_n19++){var _o15=e[_n19],_r10=_o15.__parent,_l6=(e[_n19+1]||{}).__parent;t+=_o15.getTextContent()+(_l6!==_r10?"\n":"\t");}return t;};return X;}();function J(e){return e instanceof _X;}function q(){var e=require("Lexical").$createPoint("root",0,"element"),n=require("Lexical").$createPoint("root",0,"element");return new _X("root",e,n);}function G(e,n,o){e.getKey(),n.getKey(),o.getKey();var r=require("Lexical").$getSelection(),l=J(r)?r.clone():q();return l.set(e.getKey(),n.getKey(),o.getKey()),l;}function j(e,n){var o=[[e]];for(var _e37=o.at(-1);void 0!==_e37&&o.length>0;_e37=o.at(-1)){var _r11=_e37.pop();void 0===_r11?o.pop():!1!==n(_r11)&&require("Lexical").$isElementNode(_r11)&&o.push(_r11.getChildren());}}function V(e,n){if(n===void 0){n=require("Lexical").$getEditor();}var o=require("Lexical").$getNodeByKey(e);We(o)||h(231,e);var r=te(o,n.getElementByKey(e));return null===r&&h(232,e),{tableElement:r,tableNode:o};}var _Q=function(){function Q(e,t){this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.listenersToRemove=new Set(),this.tableNodeKey=t,this.editor=e,this.table={columns:0,domRows:[],rows:0},this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.isSelecting=!1,this.pointerType=null,this.shouldCheckSelection=!1,this.abortController=new AbortController(),this.listenerOptions={signal:this.abortController.signal},this.nextFocus=null,this.trackTable();}var _proto4=Q.prototype;_proto4.getTable=function getTable(){return this.table;};_proto4.removeListeners=function removeListeners(){this.abortController.abort("removeListeners"),Array.from(this.listenersToRemove).forEach(function(e){return e();}),this.listenersToRemove.clear();};_proto4.$lookup=function $lookup(){return V(this.tableNodeKey,this.editor);};_proto4.trackTable=function trackTable(){var _this4=this;var e=new MutationObserver(function(e){_this4.editor.getEditorState().read(function(){var t=!1;for(var _n20=0;_n20<e.length;_n20++){var _o16=e[_n20].target.nodeName;if("TABLE"===_o16||"TBODY"===_o16||"THEAD"===_o16||"TR"===_o16){t=!0;break;}}if(!t)return;var _this4$$lookup=_this4.$lookup(),n=_this4$$lookup.tableNode,o=_this4$$lookup.tableElement;_this4.table=de(n,o);},{editor:_this4.editor});});this.editor.getEditorState().read(function(){var _this4$$lookup2=_this4.$lookup(),t=_this4$$lookup2.tableNode,n=_this4$$lookup2.tableElement;_this4.table=de(t,n),e.observe(n,{attributes:!0,childList:!0,subtree:!0});},{editor:this.editor});};_proto4.$clearHighlight=function $clearHighlight(){var e=this.editor;this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.$enableHighlightStyle();var _this$$lookup=this.$lookup(),n=_this$$lookup.tableNode,o=_this$$lookup.tableElement;he(e,de(n,o),null),null!==require("Lexical").$getSelection()&&(require("Lexical").$setSelection(null),e.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0));};_proto4.$enableHighlightStyle=function $enableHighlightStyle(){var t=this.editor,_this$$lookup2=this.$lookup(),n=_this$$lookup2.tableElement;require("LexicalUtils").removeClassNamesFromElement(n,t._config.theme.tableSelection),n.classList.remove("disable-selection"),this.hasHijackedSelectionStyles=!1;};_proto4.$disableHighlightStyle=function $disableHighlightStyle(){var _this$$lookup3=this.$lookup(),t=_this$$lookup3.tableElement;require("LexicalUtils").addClassNamesToElement(t,this.editor._config.theme.tableSelection),this.hasHijackedSelectionStyles=!0;};_proto4.$updateTableTableSelection=function $updateTableTableSelection(e){if(null!==e){e.tableKey!==this.tableNodeKey&&h(233,e.tableKey,this.tableNodeKey);var _t16=this.editor;this.tableSelection=e,this.isHighlightingCells=!0,this.$disableHighlightStyle(),this.updateDOMSelection(),he(_t16,this.table,this.tableSelection);}else this.$clearHighlight();};_proto4.setShouldCheckSelection=function setShouldCheckSelection(){this.shouldCheckSelection=!0;};_proto4.getAndClearShouldCheckSelection=function getAndClearShouldCheckSelection(){return!!this.shouldCheckSelection&&(this.shouldCheckSelection=!1,!0);};_proto4.setNextFocus=function setNextFocus(e){this.nextFocus=e;};_proto4.getAndClearNextFocus=function getAndClearNextFocus(){var e=this.nextFocus;return null!==e&&(this.nextFocus=null),e;};_proto4.updateDOMSelection=function updateDOMSelection(){if(null!==this.anchorCell&&null!==this.focusCell){var _e38=require("Lexical").getDOMSelection(this.editor._window);_e38&&_e38.rangeCount>0&&_e38.removeAllRanges();}};_proto4.$setFocusCellForSelection=function $setFocusCellForSelection(e,n){if(n===void 0){n=!1;}var o=this.editor,_this$$lookup4=this.$lookup(),r=_this$$lookup4.tableNode,l=e.x,s=e.y;if(this.focusCell=e,this.isHighlightingCells||this.anchorX===l&&this.anchorY===s&&!n){if(l===this.focusX&&s===this.focusY)return!1;}else this.isHighlightingCells=!0,this.$disableHighlightStyle();if(this.focusX=l,this.focusY=s,this.isHighlightingCells){var _n21=ve(r,e.elem);if(null!=this.tableSelection&&null!=this.anchorCellNodeKey&&null!==_n21)return this.focusCellNodeKey=_n21.getKey(),this.tableSelection=G(r,this.$getAnchorTableCellOrThrow(),_n21),require("Lexical").$setSelection(this.tableSelection),o.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0),he(o,this.table,this.tableSelection),!0;}return!1;};_proto4.$getAnchorTableCell=function $getAnchorTableCell(){return this.anchorCellNodeKey?require("Lexical").$getNodeByKey(this.anchorCellNodeKey):null;};_proto4.$getAnchorTableCellOrThrow=function $getAnchorTableCellOrThrow(){var e=this.$getAnchorTableCell();return null===e&&h(234),e;};_proto4.$getFocusTableCell=function $getFocusTableCell(){return this.focusCellNodeKey?require("Lexical").$getNodeByKey(this.focusCellNodeKey):null;};_proto4.$getFocusTableCellOrThrow=function $getFocusTableCellOrThrow(){var e=this.$getFocusTableCell();return null===e&&h(235),e;};_proto4.$setAnchorCellForSelection=function $setAnchorCellForSelection(e){this.isHighlightingCells=!1,this.anchorCell=e,this.anchorX=e.x,this.anchorY=e.y;var _this$$lookup5=this.$lookup(),t=_this$$lookup5.tableNode,n=ve(t,e.elem);if(null!==n){var _e39=n.getKey();this.tableSelection=null!=this.tableSelection?this.tableSelection.clone():q(),this.anchorCellNodeKey=_e39;}};_proto4.$formatCells=function $formatCells(e){var n=require("Lexical").$getSelection();J(n)||h(236);var o=require("Lexical").$createRangeSelection(),r=o.anchor,l=o.focus,s=n.getNodes().filter(u);s.length>0||h(237);var i=s[0].getFirstChild(),a=require("Lexical").$isParagraphNode(i)?i.getFormatFlags(e,null):null;s.forEach(function(t){r.set(t.getKey(),0,"element"),l.set(t.getKey(),t.getChildrenSize(),"element"),o.formatText(e,a);}),require("Lexical").$setSelection(n),this.editor.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0);};_proto4.$clearText=function $clearText(){var e=this.editor,n=require("Lexical").$getNodeByKey(this.tableNodeKey);if(!We(n))throw new Error("Expected TableNode.");var o=require("Lexical").$getSelection();J(o)||h(253);var r=o.getNodes().filter(u),l=n.getFirstChild(),s=n.getLastChild();if(r.length>0&&null!==l&&null!==s&&C(l)&&C(s)&&r[0]===l.getFirstChild()&&r[r.length-1]===s.getLastChild()){n.selectPrevious();var _o17=n.getParent();return n.remove(),void(require("Lexical").$isRootNode(_o17)&&_o17.isEmpty()&&e.dispatchCommand(require("Lexical").INSERT_PARAGRAPH_COMMAND,void 0));}r.forEach(function(e){if(require("Lexical").$isElementNode(e)){var _n22=require("Lexical").$createParagraphNode(),_o18=require("Lexical").$createTextNode();_n22.append(_o18),e.append(_n22),e.getChildren().forEach(function(e){e!==_n22&&e.remove();});}}),he(e,this.table,null),require("Lexical").$setSelection(null),e.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0);};return Q;}();var Z="__lexicalTableSelection";function ee(e){return require("Lexical").isHTMLElement(e)&&"TABLE"===e.nodeName;}function te(e,t){if(!t)return t;var n=ee(t)?t:e.getDOMSlot(t).element;return"TABLE"!==n.nodeName&&h(245,t.nodeName),n;}function ne(e){return e._window;}function oe(e,t){for(var _n23=t,_o19=null;null!==_n23;_n23=_n23.getParent()){if(e.is(_n23))return _o19;u(_n23)&&(_o19=_n23);}return null;}var re=[[require("Lexical").KEY_ARROW_DOWN_COMMAND,"down"],[require("Lexical").KEY_ARROW_UP_COMMAND,"up"],[require("Lexical").KEY_ARROW_LEFT_COMMAND,"backward"],[require("Lexical").KEY_ARROW_RIGHT_COMMAND,"forward"]],le=[require("Lexical").DELETE_WORD_COMMAND,require("Lexical").DELETE_LINE_COMMAND,require("Lexical").DELETE_CHARACTER_COMMAND],se=[require("Lexical").KEY_BACKSPACE_COMMAND,require("Lexical").KEY_DELETE_COMMAND];function ie(n,r,l,s){var i=l.getRootElement(),a=ne(l);null!==i&&null!==a||h(246);var c=new _Q(l,n.getKey()),d=te(n,r);!function(e,t){null!==ae(e)&&h(205);e[Z]=t;}(d,c),c.listenersToRemove.add(function(){return function(e,t){ae(e)===t&&delete e[Z];}(d,c);});var g=function g(e){if(c.pointerType=e.pointerType,0!==e.button||!require("Lexical").isDOMNode(e.target)||!a)return;var o=ce(e.target);null!==o&&l.update(function(){var r=require("Lexical").$getPreviousSelection();if(S&&e.shiftKey&&Ne(r,n)&&(require("Lexical").$isRangeSelection(r)||J(r))){var _t17=r.anchor.getNode(),_l7=oe(n,r.anchor.getNode());if(_l7)c.$setAnchorCellForSelection(Ae(c,_l7)),c.$setFocusCellForSelection(o),xe(e);else{(n.isBefore(_t17)?n.selectStart():n.selectEnd()).anchor.set(r.anchor.key,r.anchor.offset,r.anchor.type);}}else"touch"!==e.pointerType&&c.$setAnchorCellForSelection(o);}),function(){if(c.isSelecting)return;var _e40=function e(){c.isSelecting=!1,a.removeEventListener("pointerup",_e40),a.removeEventListener("pointermove",_n24);},_n24=function n(o){if(1&~o.buttons&&c.isSelecting)return c.isSelecting=!1,a.removeEventListener("pointerup",_e40),void a.removeEventListener("pointermove",_n24);if(!require("Lexical").isDOMNode(o.target))return;var r=null;var s=!(S||d.contains(o.target));if(s)r=ue(d,o.target);else for(var _e41 of document.elementsFromPoint(o.clientX,o.clientY))if(r=ue(d,_e41),r)break;!r||null!==c.focusCell&&r.elem===c.focusCell.elem||(c.setNextFocus({focusCell:r,override:s}),l.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0));};c.isSelecting=!0,a.addEventListener("pointerup",_e40,c.listenerOptions),a.addEventListener("pointermove",_n24,c.listenerOptions);}();};d.addEventListener("pointerdown",g,c.listenerOptions),c.listenersToRemove.add(function(){d.removeEventListener("pointerdown",g);});var f=function f(e){if(e.detail>=3&&require("Lexical").isDOMNode(e.target)){null!==ce(e.target)&&e.preventDefault();}};d.addEventListener("mousedown",f,c.listenerOptions),c.listenersToRemove.add(function(){d.removeEventListener("mousedown",f);});var m=function m(e){var n=e.target;0===e.button&&require("Lexical").isDOMNode(n)&&l.update(function(){var e=require("Lexical").$getSelection();J(e)&&e.tableKey===c.tableNodeKey&&i.contains(n)&&c.$clearHighlight();});};a.addEventListener("pointerdown",m,c.listenerOptions),c.listenersToRemove.add(function(){a.removeEventListener("pointerdown",m);});var _loop2=function _loop2(){var e=_ref3[0];var o=_ref3[1];c.listenersToRemove.add(l.registerCommand(e,function(e){return Me(l,e,o,n,c);},require("Lexical").COMMAND_PRIORITY_HIGH));};for(var _ref3 of re){_loop2();}c.listenersToRemove.add(l.registerCommand(require("Lexical").KEY_ESCAPE_COMMAND,function(e){var o=require("Lexical").$getSelection();if(J(o)){var _t18=oe(n,o.focus.getNode());if(null!==_t18)return xe(e),_t18.selectEnd(),!0;}return!1;},require("Lexical").COMMAND_PRIORITY_HIGH));var p=function p(o){return function(){var r=require("Lexical").$getSelection();if(!Ne(r,n))return!1;if(J(r))return c.$clearText(),!0;if(require("Lexical").$isRangeSelection(r)){if(!u(oe(n,r.anchor.getNode())))return!1;var _l8=r.anchor.getNode(),_s5=r.focus.getNode(),_i6=n.isParentOf(_l8),_a6=n.isParentOf(_s5);if(_i6&&!_a6||_a6&&!_i6)return c.$clearText(),!0;var _d6=require("LexicalUtils").$findMatchingParent(r.anchor.getNode(),function(e){return require("Lexical").$isElementNode(e);}),_h2=_d6&&require("LexicalUtils").$findMatchingParent(_d6,function(e){return require("Lexical").$isElementNode(e)&&u(e.getParent());});if(!require("Lexical").$isElementNode(_h2)||!require("Lexical").$isElementNode(_d6))return!1;if(o===require("Lexical").DELETE_LINE_COMMAND&&null===_h2.getPreviousSibling())return!0;}return!1;};};for(var _e42 of le)c.listenersToRemove.add(l.registerCommand(_e42,p(_e42),require("Lexical").COMMAND_PRIORITY_CRITICAL));var _=function _(e){var o=require("Lexical").$getSelection();if(!J(o)&&!require("Lexical").$isRangeSelection(o))return!1;var r=n.isParentOf(o.anchor.getNode());if(r!==n.isParentOf(o.focus.getNode())){var _e43=r?"anchor":"focus",_t19=r?"focus":"anchor",_o$t=o[_t19],_l9=_o$t.key,_s6=_o$t.offset,_i7=_o$t.type;return n[o[_e43].isBefore(o[_t19])?"selectPrevious":"selectNext"]()[_t19].set(_l9,_s6,_i7),!1;}return!!Ne(o,n)&&!!J(o)&&(e&&(e.preventDefault(),e.stopPropagation()),c.$clearText(),!0);};for(var _e44 of se)c.listenersToRemove.add(l.registerCommand(_e44,_,require("Lexical").COMMAND_PRIORITY_CRITICAL));return c.listenersToRemove.add(l.registerCommand(require("Lexical").CUT_COMMAND,function(n){var r=require("Lexical").$getSelection();if(r){if(!J(r)&&!require("Lexical").$isRangeSelection(r))return!1;require("LexicalClipboard").copyToClipboard(l,require("LexicalUtils").objectKlassEquals(n,ClipboardEvent)?n:null,require("LexicalClipboard").$getClipboardDataFromSelection(r));var _s7=_(n);return require("Lexical").$isRangeSelection(r)?(r.removeText(),!0):_s7;}return!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),c.listenersToRemove.add(l.registerCommand(require("Lexical").FORMAT_TEXT_COMMAND,function(o){var r=require("Lexical").$getSelection();if(!Ne(r,n))return!1;if(J(r))return c.$formatCells(o),!0;if(require("Lexical").$isRangeSelection(r)){var _t20=require("LexicalUtils").$findMatchingParent(r.anchor.getNode(),function(e){return u(e);});if(!u(_t20))return!1;}return!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),c.listenersToRemove.add(l.registerCommand(require("Lexical").FORMAT_ELEMENT_COMMAND,function(e){var o=require("Lexical").$getSelection();if(!J(o)||!Ne(o,n))return!1;var r=o.anchor.getNode(),l=o.focus.getNode();if(!u(r)||!u(l))return!1;if(function(e,t){if(J(e)){var _n25=e.anchor.getNode(),_o20=e.focus.getNode();if(t&&_n25&&_o20){var _H9=H(t,_n25,_o20),_e45=_H9[0];return _n25.getKey()===_e45[0][0].cell.getKey()&&_o20.getKey()===_e45[_e45.length-1].at(-1).cell.getKey();}}return!1;}(o,n))return n.setFormat(e),!0;var _H0=H(n,r,l),s=_H0[0],i=_H0[1],a=_H0[2],c=Math.max(i.startRow+i.cell.__rowSpan-1,a.startRow+a.cell.__rowSpan-1),d=Math.max(i.startColumn+i.cell.__colSpan-1,a.startColumn+a.cell.__colSpan-1),h=Math.min(i.startRow,a.startRow),g=Math.min(i.startColumn,a.startColumn),f=new Set();for(var _n26=h;_n26<=c;_n26++)for(var _o21=g;_o21<=d;_o21++){var _r12=s[_n26][_o21].cell;if(f.has(_r12))continue;f.add(_r12),_r12.setFormat(e);var _l0=_r12.getChildren();for(var _n27=0;_n27<_l0.length;_n27++){var _o22=_l0[_n27];require("Lexical").$isElementNode(_o22)&&!_o22.isInline()&&_o22.setFormat(e);}}return!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),c.listenersToRemove.add(l.registerCommand(require("Lexical").CONTROLLED_TEXT_INSERTION_COMMAND,function(o){var r=require("Lexical").$getSelection();if(!Ne(r,n))return!1;if(J(r))return c.$clearHighlight(),!1;if(require("Lexical").$isRangeSelection(r)){var _s8=require("LexicalUtils").$findMatchingParent(r.anchor.getNode(),function(e){return u(e);});if(!u(_s8))return!1;if("string"==typeof o){var _e46=Oe(l,r,n);if(_e46)return Ee(_e46,n,[require("Lexical").$createTextNode(o)]),!0;}}return!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),s&&c.listenersToRemove.add(l.registerCommand(require("Lexical").KEY_TAB_COMMAND,function(o){var r=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(r)||!r.isCollapsed()||!Ne(r,n))return!1;var l=$e(r.anchor.getNode());return!(null===l||!n.is(ye(l)))&&(xe(o),function(n,o){var r="next"===o?"getNextSibling":"getPreviousSibling",l="next"===o?"getFirstChild":"getLastChild",s=n[r]();if(require("Lexical").$isElementNode(s))return s.selectEnd();var i=require("LexicalUtils").$findMatchingParent(n,C);null===i&&h(247);for(var _e47=i[r]();C(_e47);_e47=_e47[r]()){var _n28=_e47[l]();if(require("Lexical").$isElementNode(_n28))return _n28.selectEnd();}var a=require("LexicalUtils").$findMatchingParent(i,We);null===a&&h(248);"next"===o?a.selectNext():a.selectPrevious();}(l,o.shiftKey?"previous":"next"),!0);},require("Lexical").COMMAND_PRIORITY_CRITICAL)),c.listenersToRemove.add(l.registerCommand(require("Lexical").FOCUS_COMMAND,function(e){return n.isSelected();},require("Lexical").COMMAND_PRIORITY_HIGH)),c.listenersToRemove.add(l.registerCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,function(n,o){if(l!==o)return!1;var r=n.nodes,s=n.selection,i=s.getStartEndPoints(),a=J(s),c=require("Lexical").$isRangeSelection(s)&&null!==require("LexicalUtils").$findMatchingParent(s.anchor.getNode(),function(e){return u(e);})&&null!==require("LexicalUtils").$findMatchingParent(s.focus.getNode(),function(e){return u(e);})||a;if(1!==r.length||!We(r[0])||!c||null===i)return!1;var d=i[0],h=i[1],_z11=z(d),g=_z11[0],f=_z11[1],m=_z11[2],p=require("LexicalUtils").$findMatchingParent(h.getNode(),function(e){return u(e);});if(!(u(g)&&u(p)&&C(f)&&We(m)))return!1;var _=r[0],_H1=H(m,g,p),S=_H1[0],N=_H1[1],w=_H1[2],_W3=W(_,null,null),b=_W3[0],T=S.length,$=T>0?S[0].length:0;var y=N.startRow,R=N.startColumn,x=b.length,E=x>0?b[0].length:0;if(a){var _e48=B(S,N,w),_t21=_e48.maxRow-_e48.minRow+1,_n29=_e48.maxColumn-_e48.minColumn+1;y=_e48.minRow,R=_e48.minColumn,x=Math.min(x,_t21),E=Math.min(E,_n29);}var A=!1;var v=Math.min(T,y+x)-1,F=Math.min($,R+E)-1,P=new Set();for(var _e49=y;_e49<=v;_e49++)for(var _t22=R;_t22<=F;_t22++){var _n30=S[_e49][_t22];P.has(_n30.cell.getKey())||1===_n30.cell.__rowSpan&&1===_n30.cell.__colSpan||(k(_n30.cell),P.add(_n30.cell.getKey()),A=!0);}var _W4=W(m.getWritable(),null,null),D=_W4[0];var K=x-T+y;for(var _e50=0;_e50<K;_e50++){M(D[T-1][0].cell);}var L=E-$+R;for(var _e51=0;_e51<L;_e51++){O(D[0][$-1].cell,!0,!1);}var _W5=W(m.getWritable(),null,null);D=_W5[0];for(var _e52=y;_e52<y+x;_e52++){var _loop3=function _loop3(){var o=_e52-y,r=_n31-R,l=b[o][r];if(l.startRow!==o||l.startColumn!==r)return 1;var s=l.cell;if(1!==s.__rowSpan||1!==s.__colSpan){var _t23=[],_o23=Math.min(_e52+s.__rowSpan,y+x)-1,_r13=Math.min(_n31+s.__colSpan,R+E)-1;for(var _l1=_e52;_l1<=_o23;_l1++)for(var _e53=_n31;_e53<=_r13;_e53++){var _n32=D[_l1][_e53];_t23.push(_n32.cell);}I(_t23),A=!0;}var i=D[_e52][_n31].cell,a=i.getChildren();s.getChildren().forEach(function(e){if(require("Lexical").$isTextNode(e)){require("Lexical").$createParagraphNode().append(e),i.append(e);}else i.append(e);}),a.forEach(function(e){return e.remove();});};for(var _n31=R;_n31<R+E;_n31++){if(_loop3())continue;}}if(a&&A){var _W6=W(m.getWritable(),null,null),_e54=_W6[0];_e54[N.startRow][N.startColumn].cell.selectEnd();}return!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),c.listenersToRemove.add(l.registerCommand(require("Lexical").SELECTION_CHANGE_COMMAND,function(){var o=require("Lexical").$getSelection(),r=require("Lexical").$getPreviousSelection(),s=c.getAndClearNextFocus();if(null!==s){var _e55=s.focusCell;if(J(o)&&o.tableKey===c.tableNodeKey)return(_e55.x!==c.focusX||_e55.y!==c.focusY)&&(c.$setFocusCellForSelection(_e55),!0);if(_e55!==c.anchorCell&&Ne(o,n))return c.$setFocusCellForSelection(_e55),!0;}if(c.getAndClearShouldCheckSelection()&&require("Lexical").$isRangeSelection(r)&&require("Lexical").$isRangeSelection(o)&&o.isCollapsed()){var _t24=o.anchor.getNode(),_r14=n.getFirstChild(),_l10=$e(_t24);if(null!==_l10&&C(_r14)){var _t25=_r14.getFirstChild();if(u(_t25)&&n.is(require("LexicalUtils").$findMatchingParent(_l10,function(e){return e.is(n)||e.is(_t25);})))return _t25.selectStart(),!0;}}if(require("Lexical").$isRangeSelection(o)){var _e56=o.anchor,_s9=o.focus,_i8=_e56.getNode(),_a7=_s9.getNode(),_u3=$e(_i8),_d7=$e(_a7),_h3=!(!_u3||!n.is(ye(_u3))),_g3=!(!_d7||!n.is(ye(_d7))),_f2=_h3!==_g3,_m=_h3&&_g3,_C=o.isBackward();if(_f2){var _e57=o.clone();if(_g3){var _H10=H(n,_d7,_d7),_t26=_H10[0],_o24=_t26[0][0].cell,_r15=_t26[_t26.length-1].at(-1).cell;_e57.focus.set(_C?_o24.getKey():_r15.getKey(),_C?_o24.getChildrenSize():_r15.getChildrenSize(),"element");}else if(_h3){var _H11=H(n,_u3,_u3),_t27=_H11[0],_o25=_t27[0][0].cell,_r16=_t27[_t27.length-1].at(-1).cell;_e57.anchor.set(_C?_r16.getKey():_o25.getKey(),_C?_r16.getChildrenSize():0,"element");}require("Lexical").$setSelection(_e57),fe(l,c);}else if(_m&&(_u3.is(_d7)||(c.$setAnchorCellForSelection(Ae(c,_u3)),c.$setFocusCellForSelection(Ae(c,_d7),!0)),"touch"===c.pointerType&&c.isSelecting&&o.isCollapsed()&&require("Lexical").$isRangeSelection(r)&&r.isCollapsed())){var _e58=$e(r.anchor.getNode());_e58&&!_e58.is(_d7)&&(c.$setAnchorCellForSelection(Ae(c,_e58)),c.$setFocusCellForSelection(Ae(c,_d7),!0),c.pointerType=null);}}else if(o&&J(o)&&o.is(r)&&o.tableKey===n.getKey()){var _e59=require("Lexical").getDOMSelection(a);if(_e59&&_e59.anchorNode&&_e59.focusNode){var _r17=require("Lexical").$getNearestNodeFromDOMNode(_e59.focusNode),_s0=_r17&&!n.isParentOf(_r17),_i9=require("Lexical").$getNearestNodeFromDOMNode(_e59.anchorNode),_a8=_i9&&n.isParentOf(_i9);if(_s0&&_a8&&_e59.rangeCount>0){var _r18=require("Lexical").$createRangeSelectionFromDom(_e59,l);_r18&&(_r18.anchor.set(n.getKey(),o.isBackward()?n.getChildrenSize():0,"element"),_e59.removeAllRanges(),require("Lexical").$setSelection(_r18));}}}return o&&!o.is(r)&&(J(o)||J(r))&&c.tableSelection&&!c.tableSelection.is(r)?(J(o)&&o.tableKey===c.tableNodeKey?c.$updateTableTableSelection(o):!J(o)&&J(r)&&r.tableKey===c.tableNodeKey&&c.$updateTableTableSelection(null),!1):(c.hasHijackedSelectionStyles&&!n.isSelected()?function(e,t){t.$enableHighlightStyle(),ge(t.table,function(t){var n=t.elem;t.highlighted=!1,Te(e,t),n.getAttribute("style")||n.removeAttribute("style");});}(l,c):!c.hasHijackedSelectionStyles&&n.isSelected()&&fe(l,c),!1);},require("Lexical").COMMAND_PRIORITY_CRITICAL)),c.listenersToRemove.add(l.registerCommand(require("Lexical").INSERT_PARAGRAPH_COMMAND,function(){var e=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(e)||!e.isCollapsed()||!Ne(e,n))return!1;var o=Oe(l,e,n);return!!o&&(Ee(o,n),!0);},require("Lexical").COMMAND_PRIORITY_CRITICAL)),c;}function ae(e){return e[Z]||null;}function ce(e){var t=e;for(;null!=t;){var _e60=t.nodeName;if("TD"===_e60||"TH"===_e60){var _e61=t._cell;return void 0===_e61?null:_e61;}t=t.parentNode;}return null;}function ue(e,t){if(!e.contains(t))return null;var n=null;for(var _o26=t;null!=_o26;_o26=_o26.parentNode){if(_o26===e)return n;var _t28=_o26.nodeName;"TD"!==_t28&&"TH"!==_t28||(n=_o26._cell||null);}return null;}function de(e,t){var n=[],o={columns:0,domRows:n,rows:0};var r=te(e,t).querySelector("tr"),l=0,s=0;for(n.length=0;null!=r;){var _e62=r.nodeName;if("TD"===_e62||"TH"===_e62){var _e63={elem:r,hasBackgroundColor:""!==r.style.backgroundColor,highlighted:!1,x:l,y:s};r._cell=_e63;var _t29=n[s];void 0===_t29&&(_t29=n[s]=[]),_t29[l]=_e63;}else{var _e64=r.firstChild;if(null!=_e64){r=_e64;continue;}}var _t30=r.nextSibling;if(null!=_t30){l++,r=_t30;continue;}var _o27=r.parentNode;if(null!=_o27){var _e65=_o27.nextSibling;if(null==_e65)break;s++,l=0,r=_e65;}}return o.columns=l+1,o.rows=s+1,o;}function he(e,t,n){var o=new Set(n?n.getNodes():[]);ge(t,function(t,n){var r=t.elem;o.has(n)?(t.highlighted=!0,be(e,t)):(t.highlighted=!1,Te(e,t),r.getAttribute("style")||r.removeAttribute("style"));});}function ge(e,n){var o=e.domRows;for(var _e66=0;_e66<o.length;_e66++){var _r19=o[_e66];if(_r19)for(var _o28=0;_o28<_r19.length;_o28++){var _l11=_r19[_o28];if(!_l11)continue;var _s1=require("Lexical").$getNearestNodeFromDOMNode(_l11.elem);null!==_s1&&n(_l11,_s1,{x:_o28,y:_e66});}}}function fe(e,t){t.$disableHighlightStyle(),ge(t.table,function(t){t.highlighted=!0,be(e,t);});}var me=function me(e,t,n,o,r){var l="forward"===r;switch(r){case"backward":case"forward":return n!==(l?e.table.columns-1:0)?we(t.getCellNodeFromCordsOrThrow(n+(l?1:-1),o,e.table),l):o!==(l?e.table.rows-1:0)?we(t.getCellNodeFromCordsOrThrow(l?0:e.table.columns-1,o+(l?1:-1),e.table),l):l?t.selectNext():t.selectPrevious(),!0;case"up":return 0!==o?we(t.getCellNodeFromCordsOrThrow(n,o-1,e.table),!1):t.selectPrevious(),!0;case"down":return o!==e.table.rows-1?we(t.getCellNodeFromCordsOrThrow(n,o+1,e.table),!0):t.selectNext(),!0;default:return!1;}};function Ce(e,t){var n,o;if(t.startColumn===e.minColumn)n="minColumn";else{if(t.startColumn+t.cell.__colSpan-1!==e.maxColumn)return null;n="maxColumn";}if(t.startRow===e.minRow)o="minRow";else{if(t.startRow+t.cell.__rowSpan-1!==e.maxRow)return null;o="maxRow";}return[n,o];}function pe(_ref4){var e=_ref4[0],t=_ref4[1];return["minColumn"===e?"maxColumn":"minColumn","minRow"===t?"maxRow":"minRow"];}function _e(e,t,_ref5){var n=_ref5[0],o=_ref5[1];var r=t[o],l=e[r];void 0===l&&h(250,o,String(r));var s=t[n],i=l[s];return void 0===i&&h(250,n,String(s)),i;}function Se(e,t,n,o,r){var l=B(t,n,o),s=function(e,t){var n=t.minColumn,o=t.maxColumn,r=t.minRow,l=t.maxRow;var s=1,i=1,a=1,c=1;var u=e[r],d=e[l];for(var _e67=n;_e67<=o;_e67++)s=Math.max(s,u[_e67].cell.__rowSpan),c=Math.max(c,d[_e67].cell.__rowSpan);for(var _t31=r;_t31<=l;_t31++)i=Math.max(i,e[_t31][n].cell.__colSpan),a=Math.max(a,e[_t31][o].cell.__colSpan);return{bottomSpan:c,leftSpan:i,rightSpan:a,topSpan:s};}(t,l),i=s.topSpan,a=s.leftSpan,c=s.bottomSpan,u=s.rightSpan,d=function(e,t){var n=Ce(e,t);return null===n&&h(249,t.cell.getKey()),n;}(l,n),_pe=pe(d),g=_pe[0],f=_pe[1];var m=l[g],C=l[f];"forward"===r?m+="maxColumn"===g?1:a:"backward"===r?m-="minColumn"===g?1:u:"down"===r?C+="maxRow"===f?1:i:"up"===r&&(C-="minRow"===f?1:c);var p=t[C];if(void 0===p)return!1;var _=p[m];if(void 0===_)return!1;var _ref6=function(e,t,n){var o=B(e,t,n),r=Ce(o,t);if(r)return[_e(e,o,r),_e(e,o,pe(r))];var l=Ce(o,n);if(l)return[_e(e,o,pe(l)),_e(e,o,l)];var s=["minColumn","minRow"];return[_e(e,o,s),_e(e,o,pe(s))];}(t,n,_),S=_ref6[0],N=_ref6[1],w=Ae(e,S.cell),b=Ae(e,N.cell);return e.$setAnchorCellForSelection(w),e.$setFocusCellForSelection(b,!0),!0;}function Ne(e,n){if(require("Lexical").$isRangeSelection(e)||J(e)){var _t32=n.isParentOf(e.anchor.getNode()),_o29=n.isParentOf(e.focus.getNode());return _t32&&_o29;}return!1;}function we(e,t){t?e.selectStart():e.selectEnd();}function be(n,o){var r=o.elem,l=n._config.theme;u(require("Lexical").$getNearestNodeFromDOMNode(r))||h(131),require("LexicalUtils").addClassNamesToElement(r,l.tableCellSelected);}function Te(n,o){var r=o.elem;u(require("Lexical").$getNearestNodeFromDOMNode(r))||h(131);var l=n._config.theme;require("LexicalUtils").removeClassNamesFromElement(r,l.tableCellSelected);}function $e(t){var n=require("LexicalUtils").$findMatchingParent(t,u);return u(n)?n:null;}function ye(t){var n=require("LexicalUtils").$findMatchingParent(t,We);return We(n)?n:null;}function Re(n,o,r,l,s,i,a){var c=require("Lexical").$caretFromPoint(r.focus,s?"previous":"next");if(require("Lexical").$isExtendableTextPointCaret(c))return!1;var d=c;for(var _e68 of require("Lexical").$extendCaretToRange(c).iterNodeCarets("shadowRoot")){if(!require("Lexical").$isSiblingCaret(_e68)||!require("Lexical").$isElementNode(_e68.origin))return!1;d=_e68;}var h=d.getParentAtCaret();if(!u(h))return!1;var g=h,f=function(e){for(var _n33 of require("Lexical").$extendCaretToRange(e).iterNodeCarets("root")){var _o30=_n33.origin;if(u(_o30)){if(require("Lexical").$isChildCaret(_n33))return require("Lexical").$getChildCaret(_o30,e.direction);}else if(!C(_o30))break;}return null;}(require("Lexical").$getSiblingCaret(g,d.direction)),m=require("LexicalUtils").$findMatchingParent(g,We);if(!m||!m.is(i))return!1;var p=n.getElementByKey(g.getKey()),_=ce(p);if(!p||!_)return!1;var S=Le(n,m);if(a.table=S,f){if("extend"===l){var _e69=ce(n.getElementByKey(f.origin.getKey()));if(!_e69)return!1;a.$setAnchorCellForSelection(_),a.$setFocusCellForSelection(_e69,!0);}else{var _e70=require("Lexical").$normalizeCaret(f);require("Lexical").$setPointFromCaret(r.anchor,_e70),require("Lexical").$setPointFromCaret(r.focus,_e70);}}else if("extend"===l)a.$setAnchorCellForSelection(_),a.$setFocusCellForSelection(_,!0);else{var _e71=function(e){var n=require("Lexical").$getAdjacentChildCaret(e);return require("Lexical").$isChildCaret(n)?require("Lexical").$normalizeCaret(n):e;}(require("Lexical").$getSiblingCaret(m,c.direction));require("Lexical").$setPointFromCaret(r.anchor,_e71),require("Lexical").$setPointFromCaret(r.focus,_e71);}return xe(o),!0;}function Me(n,o,r,l,s){if(("up"===r||"down"===r)&&function(e){var t=e.getRootElement();if(!t)return!1;return t.hasAttribute("aria-controls")&&"typeahead-menu"===t.getAttribute("aria-controls");}(n))return!1;var i=require("Lexical").$getSelection();if(!Ne(i,l)){if(require("Lexical").$isRangeSelection(i)){if("backward"===r){if(i.focus.offset>0)return!1;var _e72=function(e){for(var _n34=e,_o31=e;null!==_o31;_n34=_o31,_o31=_o31.getParent())if(require("Lexical").$isElementNode(_o31)){if(_o31!==_n34&&_o31.getFirstChild()!==_n34)return null;if(!_o31.isInline())return _o31;}return null;}(i.focus.getNode());if(!_e72)return!1;var _n35=_e72.getPreviousSibling();return!!We(_n35)&&(xe(o),o.shiftKey?i.focus.set(_n35.getParentOrThrow().getKey(),_n35.getIndexWithinParent(),"element"):_n35.selectEnd(),!0);}if(o.shiftKey&&("up"===r||"down"===r)){var _n36=i.focus.getNode();if(!i.isCollapsed()&&("up"===r&&!i.isBackward()||"down"===r&&i.isBackward())){var _s10=require("LexicalUtils").$findMatchingParent(_n36,function(e){return We(e);});if(u(_s10)&&(_s10=require("LexicalUtils").$findMatchingParent(_s10,We)),_s10!==l)return!1;if(!_s10)return!1;var _a9="down"===r?_s10.getNextSibling():_s10.getPreviousSibling();if(!_a9)return!1;var _c5=0;"up"===r&&require("Lexical").$isElementNode(_a9)&&(_c5=_a9.getChildrenSize());var _d8=_a9;if("up"===r&&require("Lexical").$isElementNode(_a9)){var _e73=_a9.getLastChild();_d8=_e73||_a9,_c5=require("Lexical").$isTextNode(_d8)?_d8.getTextContentSize():0;}var _h4=i.clone();return _h4.focus.set(_d8.getKey(),_c5,require("Lexical").$isTextNode(_d8)?"text":"element"),require("Lexical").$setSelection(_h4),xe(o),!0;}if(require("Lexical").$isRootOrShadowRoot(_n36)){var _e74="up"===r?i.getNodes()[i.getNodes().length-1]:i.getNodes()[0];if(_e74){if(null!==oe(l,_e74)){var _e75=l.getFirstDescendant(),_t33=l.getLastDescendant();if(!_e75||!_t33)return!1;var _z12=z(_e75),_n37=_z12[0],_z13=z(_t33),_o32=_z13[0],_r20=l.getCordsFromCellNode(_n37,s.table),_i0=l.getCordsFromCellNode(_o32,s.table),_a0=l.getDOMCellFromCordsOrThrow(_r20.x,_r20.y,s.table),_c6=l.getDOMCellFromCordsOrThrow(_i0.x,_i0.y,s.table);return s.$setAnchorCellForSelection(_a0),s.$setFocusCellForSelection(_c6,!0),!0;}}return!1;}{var _l12=require("LexicalUtils").$findMatchingParent(_n36,function(e){return require("Lexical").$isElementNode(e)&&!e.isInline();});if(u(_l12)&&(_l12=require("LexicalUtils").$findMatchingParent(_l12,We)),!_l12)return!1;var _a1="down"===r?_l12.getNextSibling():_l12.getPreviousSibling();if(We(_a1)&&s.tableNodeKey===_a1.getKey()){var _e76=_a1.getFirstDescendant(),_n38=_a1.getLastDescendant();if(!_e76||!_n38)return!1;var _z14=z(_e76),_l13=_z14[0],_z15=z(_n38),_s11=_z15[0],_c7=i.clone();return _c7.focus.set(("up"===r?_l13:_s11).getKey(),"up"===r?0:_s11.getChildrenSize(),"element"),xe(o),require("Lexical").$setSelection(_c7),!0;}}}}return"down"===r&&De(n)&&s.setShouldCheckSelection(),!1;}if(require("Lexical").$isRangeSelection(i)){if("backward"===r||"forward"===r){return Re(n,o,i,o.shiftKey?"extend":"move","backward"===r,l,s);}if(i.isCollapsed()){var _a10=i.anchor,_c8=i.focus,_d9=require("LexicalUtils").$findMatchingParent(_a10.getNode(),u),_h5=require("LexicalUtils").$findMatchingParent(_c8.getNode(),u);if(!u(_d9)||!_d9.is(_h5))return!1;var _g4=ye(_d9);if(_g4!==l&&null!=_g4){var _e77=te(_g4,n.getElementByKey(_g4.getKey()));if(null!=_e77)return s.table=de(_g4,_e77),Me(n,o,r,_g4,s);}var _f3=n.getElementByKey(_d9.__key),_m2=n.getElementByKey(_a10.key);if(null==_m2||null==_f3)return!1;var _C2;if("element"===_a10.type)_C2=_m2.getBoundingClientRect();else{var _e78=require("Lexical").getDOMSelection(ne(n));if(null===_e78||0===_e78.rangeCount)return!1;_C2=_e78.getRangeAt(0).getBoundingClientRect();}var _p="up"===r?_d9.getFirstChild():_d9.getLastChild();if(null==_p)return!1;var _2=n.getElementByKey(_p.__key);if(null==_2)return!1;var _S=_2.getBoundingClientRect();if("up"===r?_S.top>_C2.top-_C2.height:_C2.bottom+_C2.height>_S.bottom){xe(o);var _e79=l.getCordsFromCellNode(_d9,s.table);if(!o.shiftKey)return me(s,l,_e79.x,_e79.y,r);{var _t34=l.getDOMCellFromCordsOrThrow(_e79.x,_e79.y,s.table);s.$setAnchorCellForSelection(_t34),s.$setFocusCellForSelection(_t34,!0);}return!0;}}}else if(J(i)){var _t35=i.anchor,_a11=i.focus,_c9=require("LexicalUtils").$findMatchingParent(_t35.getNode(),u),_d0=require("LexicalUtils").$findMatchingParent(_a11.getNode(),u),_i$getNodes=i.getNodes(),_g5=_i$getNodes[0];We(_g5)||h(251);var _f4=te(_g5,n.getElementByKey(_g5.getKey()));if(!u(_c9)||!u(_d0)||!We(_g5)||null==_f4)return!1;s.$updateTableTableSelection(i);var _m3=de(_g5,_f4),_C3=l.getCordsFromCellNode(_c9,_m3),_p2=l.getDOMCellFromCordsOrThrow(_C3.x,_C3.y,_m3);if(s.$setAnchorCellForSelection(_p2),xe(o),o.shiftKey){var _H12=H(l,_c9,_d0),_e80=_H12[0],_t36=_H12[1],_n39=_H12[2];return Se(s,_e80,_t36,_n39,r);}return _d0.selectEnd(),!0;}return!1;}function xe(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();}function Ee(e,n,o){var r=require("Lexical").$createParagraphNode();"first"===e?n.insertBefore(r):n.insertAfter(r),r.append.apply(r,o||[]),r.selectEnd();}function Oe(n,o,r){var l=r.getParent();if(!l)return;var s=require("Lexical").getDOMSelection(ne(n));if(!s)return;var i=s.anchorNode,a=n.getElementByKey(l.getKey()),c=te(r,n.getElementByKey(r.getKey()));if(!i||!a||!c||!a.contains(i)||c.contains(i))return;var d=require("LexicalUtils").$findMatchingParent(o.anchor.getNode(),function(e){return u(e);});if(!d)return;var h=require("LexicalUtils").$findMatchingParent(d,function(e){return We(e);});if(!We(h)||!h.is(r))return;var _H13=H(r,d,d),g=_H13[0],f=_H13[1],m=g[0][0],C=g[g.length-1][g[0].length-1],p=f.startRow,_=f.startColumn,S=p===m.startRow&&_===m.startColumn,N=p===C.startRow&&_===C.startColumn;return S?"first":N?"last":void 0;}function Ae(e,t){var _e$$lookup=e.$lookup(),n=_e$$lookup.tableNode,o=n.getCordsFromCellNode(t,e.table);return n.getDOMCellFromCordsOrThrow(o.x,o.y,e.table);}function ve(e,n,o){return oe(e,require("Lexical").$getNearestNodeFromDOMNode(n,o));}function Fe(t,n,o){if(!n.theme.tableAlignment)return;var r=[],l=[];for(var _e81 of["center","right"]){var _t37=n.theme.tableAlignment[_e81];_t37&&(_e81===o?l:r).push(_t37);}require("LexicalUtils").removeClassNamesFromElement.apply(require("LexicalUtils"),[t].concat(r)),require("LexicalUtils").addClassNamesToElement.apply(require("LexicalUtils"),[t].concat(l));}var Pe=new WeakSet();function De(e){if(e===void 0){e=require("Lexical").$getEditor();}return Pe.has(e);}function Ke(e,t){t?Pe.add(e):Pe["delete"](e);}var _Ie=function(_t$ElementNode3){function Ie(e){var _this3;_this3=_t$ElementNode3.call(this,e)||this,_this3.__rowStriping=!1,_this3.__frozenColumnCount=0,_this3.__frozenRowCount=0;return _this3;}babelHelpers.inheritsLoose(Ie,_t$ElementNode3);Ie.getType=function getType(){return"table";};var _proto5=Ie.prototype;_proto5.getColWidths=function getColWidths(){return this.getLatest().__colWidths;};_proto5.setColWidths=function setColWidths(e){var t=this.getWritable();return t.__colWidths=e,t;};Ie.clone=function clone(e){return new Ie(e.__key);};_proto5.afterCloneFrom=function afterCloneFrom(e){_t$ElementNode3.prototype.afterCloneFrom.call(this,e),this.__colWidths=e.__colWidths,this.__rowStriping=e.__rowStriping,this.__frozenColumnCount=e.__frozenColumnCount,this.__frozenRowCount=e.__frozenRowCount;};Ie.importDOM=function importDOM(){return{table:function table(e){return{conversion:ke,priority:1};}};};Ie.importJSON=function importJSON(e){return He().updateFromJSON(e);};_proto5.updateFromJSON=function updateFromJSON(e){return _t$ElementNode3.prototype.updateFromJSON.call(this,e).setRowStriping(e.rowStriping||!1).setFrozenColumns(e.frozenColumnCount||0).setFrozenRows(e.frozenRowCount||0).setColWidths(e.colWidths);};_proto5.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_t$ElementNode3.prototype.exportJSON.call(this),{colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0});};_proto5.extractWithChild=function extractWithChild(e,t,n){return"html"===n;};_proto5.getDOMSlot=function getDOMSlot(e){var t=ee(e)?e:e.querySelector("table");return ee(t)||h(229),_t$ElementNode3.prototype.getDOMSlot.call(this,e).withElement(t).withAfter(t.querySelector("colgroup"));};_proto5.createDOM=function createDOM(n,o){var r=document.createElement("table");this.__style&&(r.style.cssText=this.__style);var l=document.createElement("colgroup");if(r.appendChild(l),require("Lexical").setDOMUnmanaged(l),require("LexicalUtils").addClassNamesToElement(r,n.theme.table),this.updateTableElement(null,r,n),De(o)){var _t38=document.createElement("div"),_o33=n.theme.tableScrollableWrapper;return _o33?require("LexicalUtils").addClassNamesToElement(_t38,_o33):_t38.style.cssText="overflow-x: auto;",_t38.appendChild(r),this.updateTableWrapper(null,_t38,r,n),_t38;}return r;};_proto5.updateTableWrapper=function updateTableWrapper(t,n,o,r){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&function(t,n,o,r){r>0?(require("LexicalUtils").addClassNamesToElement(t,o.theme.tableFrozenColumn),n.setAttribute("data-lexical-frozen-column","true")):(require("LexicalUtils").removeClassNamesFromElement(t,o.theme.tableFrozenColumn),n.removeAttribute("data-lexical-frozen-column"));}(n,o,r,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&function(t,n,o,r){r>0?(require("LexicalUtils").addClassNamesToElement(t,o.theme.tableFrozenRow),n.setAttribute("data-lexical-frozen-row","true")):(require("LexicalUtils").removeClassNamesFromElement(t,o.theme.tableFrozenRow),n.removeAttribute("data-lexical-frozen-row"));}(n,o,r,this.__frozenRowCount);};_proto5.updateTableElement=function updateTableElement(t,n,o){this.__style!==(t?t.__style:"")&&(n.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&function(t,n,o){o?(require("LexicalUtils").addClassNamesToElement(t,n.theme.tableRowStriping),t.setAttribute("data-lexical-row-striping","true")):(require("LexicalUtils").removeClassNamesFromElement(t,n.theme.tableRowStriping),t.removeAttribute("data-lexical-row-striping"));}(n,o,this.__rowStriping),function(e,t,n,o){var r=e.querySelector("colgroup");if(!r)return;var l=[];for(var _e82=0;_e82<n;_e82++){var _t39=document.createElement("col"),_n40=o&&o[_e82];_n40&&(_t39.style.width=_n40+"px"),l.push(_t39);}r.replaceChildren.apply(r,l);}(n,0,this.getColumnCount(),this.getColWidths()),Fe(n,o,this.getFormatType());};_proto5.updateDOM=function updateDOM(t,n,o){var r=this.getDOMSlot(n).element;return n===r===De()||(l=n,require("LexicalUtils").isHTMLElement(l)&&"DIV"===l.nodeName&&this.updateTableWrapper(t,n,r,o),this.updateTableElement(t,r,o),!1);var l;};_proto5.exportDOM=function exportDOM(t){var _this5=this;var n=_t$ElementNode3.prototype.exportDOM.call(this,t),o=n.element;return{after:function after(o){if(n.after&&(o=n.after(o)),!ee(o)&&require("LexicalUtils").isHTMLElement(o)&&(o=o.querySelector("table")),!ee(o))return null;Fe(o,t._config,_this5.getFormatType());var _W7=W(_this5,null,null),r=_W7[0],l=new Map();for(var _e83 of r)for(var _t40 of _e83){var _e84=_t40.cell.getKey();l.has(_e84)||l.set(_e84,{colSpan:_t40.cell.getColSpan(),startColumn:_t40.startColumn});}var s=new Set();for(var _e85 of o.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){var _t41=_e85.getAttribute("data-temporary-table-cell-lexical-key");if(_t41){var _n41=l.get(_t41);if(_e85.removeAttribute("data-temporary-table-cell-lexical-key"),_n41){l["delete"](_t41);for(var _e86=0;_e86<_n41.colSpan;_e86++)s.add(_e86+_n41.startColumn);}}}var i=o.querySelector(":scope > colgroup");if(i){var _e87=Array.from(o.querySelectorAll(":scope > colgroup > col")).filter(function(e,t){return s.has(t);});i.replaceChildren.apply(i,_e87);}var a=o.querySelectorAll(":scope > tr");if(a.length>0){var _e88=document.createElement("tbody");for(var _t42 of a)_e88.appendChild(_t42);o.append(_e88);}return o;},element:!ee(o)&&require("LexicalUtils").isHTMLElement(o)?o.querySelector("table"):o};};_proto5.canBeEmpty=function canBeEmpty(){return!1;};_proto5.isShadowRoot=function isShadowRoot(){return!0;};_proto5.getCordsFromCellNode=function getCordsFromCellNode(e,t){var n=t.rows,o=t.domRows;for(var _t43=0;_t43<n;_t43++){var _n42=o[_t43];if(null!=_n42)for(var _o34=0;_o34<_n42.length;_o34++){var _r21=_n42[_o34];if(null==_r21)continue;var _l14=_r21.elem,_s12=ve(this,_l14);if(null!==_s12&&e.is(_s12))return{x:_o34,y:_t43};}}throw new Error("Cell not found in table.");};_proto5.getDOMCellFromCords=function getDOMCellFromCords(e,t,n){var o=n.domRows,r=o[t];if(null==r)return null;var l=r[e<r.length?e:r.length-1];return null==l?null:l;};_proto5.getDOMCellFromCordsOrThrow=function getDOMCellFromCordsOrThrow(e,t,n){var o=this.getDOMCellFromCords(e,t,n);if(!o)throw new Error("Cell not found at cords.");return o;};_proto5.getCellNodeFromCords=function getCellNodeFromCords(e,n,o){var r=this.getDOMCellFromCords(e,n,o);if(null==r)return null;var l=require("Lexical").$getNearestNodeFromDOMNode(r.elem);return u(l)?l:null;};_proto5.getCellNodeFromCordsOrThrow=function getCellNodeFromCordsOrThrow(e,t,n){var o=this.getCellNodeFromCords(e,t,n);if(!o)throw new Error("Node at cords not TableCellNode.");return o;};_proto5.getRowStriping=function getRowStriping(){return Boolean(this.getLatest().__rowStriping);};_proto5.setRowStriping=function setRowStriping(e){var t=this.getWritable();return t.__rowStriping=e,t;};_proto5.setFrozenColumns=function setFrozenColumns(e){var t=this.getWritable();return t.__frozenColumnCount=e,t;};_proto5.getFrozenColumns=function getFrozenColumns(){return this.getLatest().__frozenColumnCount;};_proto5.setFrozenRows=function setFrozenRows(e){var t=this.getWritable();return t.__frozenRowCount=e,t;};_proto5.getFrozenRows=function getFrozenRows(){return this.getLatest().__frozenRowCount;};_proto5.canSelectBefore=function canSelectBefore(){return!0;};_proto5.canIndent=function canIndent(){return!1;};_proto5.getColumnCount=function getColumnCount(){var e=this.getFirstChild();if(!e)return 0;var t=0;return e.getChildren().forEach(function(e){u(e)&&(t+=e.getColSpan());}),t;};return Ie;}(require("Lexical").ElementNode);function Le(e,t){var n=e.getElementByKey(t.getKey());return null===n&&h(230),de(t,n);}function ke(t){var n=He();t.hasAttribute("data-lexical-row-striping")&&n.setRowStriping(!0),t.hasAttribute("data-lexical-frozen-column")&&n.setFrozenColumns(1),t.hasAttribute("data-lexical-frozen-row")&&n.setFrozenRows(1);var o=t.querySelector(":scope > colgroup");if(o){var _e89=[];for(var _t44 of o.querySelectorAll(":scope > col")){var _n43=_t44.style.width||"";if(!r.test(_n43)&&(_n43=_t44.getAttribute("width")||"",!/^\d+$/.test(_n43))){_e89=void 0;break;}_e89.push(parseFloat(_n43));}_e89&&n.setColWidths(_e89);}return{after:function after(t){return require("LexicalUtils").$descendantsMatching(t,C);},node:n};}function He(){return require("Lexical").$applyNodeReplacement(new _Ie());}function We(e){return e instanceof _Ie;}function ze(_ref7){var n=_ref7.rows,o=_ref7.columns,r=_ref7.includeHeaders;var l=require("Lexical").$getSelection()||require("Lexical").$getPreviousSelection();if(!l||!require("Lexical").$isRangeSelection(l))return!1;if(ye(l.anchor.getNode()))return!1;var s=N(Number(n),Number(o),r);require("LexicalUtils").$insertNodeToNearestRoot(s);var i=s.getFirstDescendant();return require("Lexical").$isTextNode(i)&&i.select(),!0;}function Be(e){C(e.getParent())?e.isEmpty()&&e.append(require("Lexical").$createParagraphNode()):e.remove();}function Ye(t){We(t.getParent())?require("LexicalUtils").$unwrapAndFilterDescendants(t,u):t.remove();}function Ue(n){require("LexicalUtils").$unwrapAndFilterDescendants(n,C);var _W8=W(n,null,null),o=_W8[0],r=o.reduce(function(e,t){return Math.max(e,t.length);},0),l=n.getChildren();for(var _e90=0;_e90<o.length;++_e90){var _n44=l[_e90];if(!_n44)continue;C(_n44)||h(254,_n44.constructor.name,_n44.getType());var _s13=o[_e90].reduce(function(e,t){return t?1+e:e;},0);if(_s13!==r)for(var _e91=_s13;_e91<r;++_e91){var _e92=c();_e92.append(require("Lexical").$createParagraphNode()),_n44.append(_e92);}}}function Xe(n){if(n.detail<3||!require("Lexical").isDOMNode(n.target))return!1;var o=require("Lexical").$getNearestNodeFromDOMNode(n.target);if(null===o)return!1;var r=require("LexicalUtils").$findMatchingParent(o,function(e){return require("Lexical").$isElementNode(e)&&!e.isInline();});if(null===r)return!1;return!!u(r.getParent())&&(r.select(0),!0);}function Je(t){return t.registerNodeTransform(_s15,function(t){if(t.getColSpan()>1||t.getRowSpan()>1){var _z16=z(t),_n45=_z16[2],_H14=H(_n45,t,t),_o35=_H14[0],_r22=_o35.length,_l15=_o35[0].length;var _s14=_n45.getFirstChild();C(_s14)||h(175);var _i1=[];for(var _t45=0;_t45<_r22;_t45++){0!==_t45&&(_s14=_s14.getNextSibling(),C(_s14)||h(175));var _n46=null;for(var _r23=0;_r23<_l15;_r23++){var _l16=_o35[_t45][_r23],_a12=_l16.cell;if(_l16.startRow===_t45&&_l16.startColumn===_r23)_n46=_a12,_i1.push(_a12);else if(_a12.getColSpan()>1||_a12.getRowSpan()>1){u(_a12)||h(176);var _t46=c(_a12.__headerState);null!==_n46?_n46.insertAfter(_t46):require("LexicalUtils").$insertFirst(_s14,_t46);}}}for(var _e93 of _i1)_e93.setColSpan(1),_e93.setRowSpan(1);}});}function qe(e,t){if(t===void 0){t=!0;}var n=new Map(),o=function o(_o36,r,l){var s=te(_o36,l),i=ie(_o36,s,e,t);n.set(r,[i,s]);},r=e.registerMutationListener(_Ie,function(t){e.getEditorState().read(function(){for(var _ref9 of t){var _e94=_ref9[0];var _r24=_ref9[1];{var _t47=n.get(_e94);if("created"===_r24||"updated"===_r24){var _V=V(_e94),_r25=_V.tableNode,_l17=_V.tableElement;void 0===_t47?o(_r25,_e94,_l17):_l17!==_t47[1]&&(_t47[0].removeListeners(),n["delete"](_e94),o(_r25,_e94,_l17));}else"destroyed"===_r24&&void 0!==_t47&&(_t47[0].removeListeners(),n["delete"](_e94));}}},{editor:e});},{skipInitialization:!1});return function(){r();for(var _ref1 of n){var _ref0$=_ref1[1];var _e95=_ref0$[0];_e95.removeListeners();}};}function Ge(n){return n.hasNodes([_Ie])||h(255),require("LexicalUtils").mergeRegister(n.registerCommand(d,ze,require("Lexical").COMMAND_PRIORITY_EDITOR),n.registerCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,function(_ref10,r){var e=_ref10.nodes,o=_ref10.selection;if(n!==r||!require("Lexical").$isRangeSelection(o))return!1;return null!==ye(o.anchor.getNode())&&e.some(We);},require("Lexical").COMMAND_PRIORITY_EDITOR),n.registerCommand(require("Lexical").CLICK_COMMAND,Xe,require("Lexical").COMMAND_PRIORITY_EDITOR),n.registerNodeTransform(_Ie,Ue),n.registerNodeTransform(_g8,Ye),n.registerNodeTransform(_s15,Be));}var je=require("Lexical").defineExtension({build:function build(e,t,o){return require("LexicalExtension").namedSignals(t);},config:require("Lexical").safeCast({hasCellBackgroundColor:!0,hasCellMerge:!0,hasHorizontalScroll:!0,hasTabHandler:!0}),name:"@lexical/table/Table",nodes:[_Ie,_g8,_s15],register:function register(t,o,r){var _require_LexicalExtension;var l=r.getOutput();return require("LexicalUtils").mergeRegister((_require_LexicalExtension=require("LexicalExtension")).effect(function(){var e=l.hasHorizontalScroll.value;De(t)!==e&&(Ke(t,e),t.registerNodeTransform(_Ie,function(){})());}),Ge(t),_require_LexicalExtension.effect(function(){return qe(t,l.hasTabHandler.value);}),_require_LexicalExtension.effect(function(){return l.hasCellMerge.value?void 0:Je(t);}),_require_LexicalExtension.effect(function(){return l.hasCellBackgroundColor.value?void 0:t.registerNodeTransform(_s15,function(e){null!==e.getBackgroundColor()&&e.setBackgroundColor(null);});}));}});exports.$computeTableMap=H,exports.$computeTableMapSkipCellCheck=W,exports.$createTableCellNode=c,exports.$createTableNode=He,exports.$createTableNodeWithDimensions=N,exports.$createTableRowNode=m,exports.$createTableSelection=q,exports.$createTableSelectionFrom=G,exports.$deleteTableColumn=function(e,t){var n=e.getChildren();for(var _e96=0;_e96<n.length;_e96++){var _o37=n[_e96];if(C(_o37)){var _e97=_o37.getChildren();if(t>=_e97.length||t<0)throw new Error("Table column target index out of range");_e97[t].remove();}}return e;},exports.$deleteTableColumnAtSelection=F,exports.$deleteTableColumn__EXPERIMENTAL=P,exports.$deleteTableRowAtSelection=A,exports.$deleteTableRow__EXPERIMENTAL=v,exports.$findCellNode=$e,exports.$findTableNode=ye,exports.$getElementForTableNode=Le,exports.$getNodeTriplet=z,exports.$getTableAndElementByKey=V,exports.$getTableCellNodeFromLexicalNode=function(t){var n=require("LexicalUtils").$findMatchingParent(t,function(e){return u(e);});return u(n)?n:null;},exports.$getTableCellNodeRect=Y,exports.$getTableColumnIndexFromTableCellNode=function(e){return w(e).getChildren().findIndex(function(t){return t.is(e);});},exports.$getTableNodeFromLexicalNodeOrThrow=b,exports.$getTableRowIndexFromTableCellNode=function(e){var t=w(e);return b(t).getChildren().findIndex(function(e){return e.is(t);});},exports.$getTableRowNodeFromTableCellNodeOrThrow=w,exports.$insertTableColumn=function(e,n,o,r,s){if(o===void 0){o=!0;}var i=e.getChildren(),a=[];for(var _e98=0;_e98<i.length;_e98++){var _o38=i[_e98];if(C(_o38))for(var _e99=0;_e99<r;_e99++){var _e100=_o38.getChildren();if(n>=_e100.length||n<0)throw new Error("Table column target index out of range");var _r26=_e100[n];u(_r26)||h(12);var _T=T(_r26,s),_i10=_T.left,_d1=_T.right;var _g6=l.NO_STATUS;(_i10&&_i10.hasHeaderState(l.ROW)||_d1&&_d1.hasHeaderState(l.ROW))&&(_g6|=l.ROW);var _f5=c(_g6);_f5.append(require("Lexical").$createParagraphNode()),a.push({newTableCell:_f5,targetCell:_r26});}}return a.forEach(function(_ref11){var e=_ref11.newTableCell,t=_ref11.targetCell;o?t.insertAfter(e):t.insertBefore(e);}),e;},exports.$insertTableColumnAtSelection=x,exports.$insertTableColumn__EXPERIMENTAL=E,exports.$insertTableRow=function(e,n,o,r,s){if(o===void 0){o=!0;}var i=e.getChildren();if(n>=i.length||n<0)throw new Error("Table row target index out of range");var a=i[n];if(!C(a))throw new Error("Row before insertion index does not exist.");for(var _e101=0;_e101<r;_e101++){var _e102=a.getChildren(),_n47=_e102.length,_r27=m();for(var _o39=0;_o39<_n47;_o39++){var _n48=_e102[_o39];u(_n48)||h(12);var _T2=T(_n48,s),_i11=_T2.above,_a13=_T2.below;var _d10=l.NO_STATUS;var _g7=_i11&&_i11.getWidth()||_a13&&_a13.getWidth()||void 0;(_i11&&_i11.hasHeaderState(l.COLUMN)||_a13&&_a13.hasHeaderState(l.COLUMN))&&(_d10|=l.COLUMN);var _f6=c(_d10,1,_g7);_f6.append(require("Lexical").$createParagraphNode()),_r27.append(_f6);}o?a.insertAfter(_r27):a.insertBefore(_r27);}return e;},exports.$insertTableRowAtSelection=y,exports.$insertTableRow__EXPERIMENTAL=R,exports.$isScrollableTablesActive=De,exports.$isTableCellNode=u,exports.$isTableNode=We,exports.$isTableRowNode=C,exports.$isTableSelection=J,exports.$mergeCells=I,exports.$removeTableRowAtIndex=function(e,t){var n=e.getChildren();if(t>=n.length||t<0)throw new Error("Expected table cell to be inside of table row.");return n[t].remove(),e;},exports.$unmergeCell=function(){var n=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(n)||J(n)||h(188);var o=n.anchor.getNode(),r=require("LexicalUtils").$findMatchingParent(o,u);return u(r)||h(148),k(r);},exports.INSERT_TABLE_COMMAND=d,exports.TableCellHeaderStates=l,exports.TableCellNode=_s15,exports.TableExtension=je,exports.TableNode=_Ie,exports.TableObserver=_Q,exports.TableRowNode=_g8,exports.applyTableHandlers=ie,exports.getDOMCellFromTarget=ce,exports.getTableElement=te,exports.getTableObserverFromTableElement=ae,exports.registerTableCellUnmergeTransform=Je,exports.registerTablePlugin=Ge,exports.registerTableSelectionObserver=qe,exports.setScrollableTablesActive=Ke;}),null);
__d("LoadContactWithCapabilities_ContactCapabilities2Query_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24013750788220356"}),null);
__d("LoadContactWithCapabilities_ContactCapabilities2Query.graphql",["LoadContactWithCapabilities_ContactCapabilities2Query_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c=[{kind:"Variable",name:"id",variableName:"id"}],d={alias:null,args:null,kind:"ScalarField",name:"message_capabilities2_str",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LoadContactWithCapabilities_ContactCapabilities2Query",selections:[{alias:null,args:c,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LoadContactWithCapabilities_ContactCapabilities2Query",selections:[{alias:null,args:c,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("LoadContactWithCapabilities_ContactCapabilities2Query_facebookRelayOperation"),metadata:{},name:"LoadContactWithCapabilities_ContactCapabilities2Query",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("LoadContactWithCapabilities",["CometRelay","I64","LSDatabaseSingleton","LSVerifyContactExistsWithID","LoadContactWithCapabilities_ContactCapabilities2Query.graphql","Promise","ReQL","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=h!==void 0?h:h=b("LoadContactWithCapabilities_ContactCapabilities2Query.graphql");function a(a,e){var g=(j||(j=d("I64"))).of_string(a),h=c("gkx")("7256")?(k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(b){return d("LSVerifyContactExistsWithID").runInTransaction(b,(j||(j=d("I64"))).of_string(a),!1,void 0,f.id+":43")}):void 0,m=h!=null?(i||(i=b("Promise"))).all([(k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton,h]).then(function(a){var b=a[0];a[1];return d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(g))}):(k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return d("LSVerifyContactExistsWithID").runInTransaction(a,g,!1,void 0,f.id+":59").then(function(){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(g))})});e=d("CometRelay").fetchQuery(e,l,{id:a},{fetchPolicy:"store-or-network"}).toPromise().then(function(a){var b;return a==null||(b=a.user)==null?void 0:b.message_capabilities2_str});return{contactCapabilities:e,contactFetch:m,contactSync:h}}g.tryLoadContactAggressively=a}),98);
__d("MAWWATimedBridgeAPI",["FBLogger","MAWMaybeWithTimeout","MAWTimedBridge","MAWWaitForBackendSetup","MAWWebWorkerSingleton","WMIWABridgeApi"],(function(a,b,c,d,e,f,g){"use strict";a={getCurrentUserDeviceList:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").getCurrentUserDeviceList.apply(c("WMIWABridgeApi"),b)},"getCurrentUserDeviceList")},getDevices:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").getDevices.apply(c("WMIWABridgeApi"),b)},"getDevices")},getIdentityKeys:function(){return h(function(){return c("WMIWABridgeApi").getIdentityKeys()},"getIdentityKeys")},queryGroups:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").queryGroups.apply(c("WMIWABridgeApi"),b)},"queryGroups")},removeCurrentDevice:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").removeCurrentDevice.apply(c("WMIWABridgeApi"),b)},"removeCurrentDevice")},removeDevice:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").removeDevice.apply(c("WMIWABridgeApi"),b)},"removeDevice")}};function h(a,b){return d("MAWWaitForBackendSetup").waitForBackendSetup(b).then(function(){return d("MAWMaybeWithTimeout").maybeWithTimeout(a(),d("MAWTimedBridge").DEFAULT_MAW_BRIDGE_TIMEOUT_MS,function(){return d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(a){var e=new(d("MAWTimedBridge").MAWBridgeTimeoutError)("WABridged route "+b+" timed out");throw c("FBLogger")("messenger_web").catching(e).mustfixThrow("Failed to complete WABridged route %s in time. workerHealthStatus: %s",b,a.tag)})},b)})}b=a;g["default"]=b}),98);
__d("MAWShareOptimisticGetDevices",["MAWFetchUserJids","MAWWATimedBridgeAPI","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("promiseDone")(a,function(a){c("promiseDone")(Promise.all(b.map(async function(b){b=await d("MAWFetchUserJids").fetchUserJids(a,b);return c("MAWWATimedBridgeAPI").getDevices({ignoreDhash:!1,reason:"send-share-attachment: MAWShareOptimisticGetDevices",users:new Set(b)})})))})}g.MAWShareOptimisticGetDevices=a}),98);
__d("MAWShareOptimisticUpload",["FBLogger","I64","MAWMediaManagerUtils","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f){return a==null?(i||(i=b("Promise"))).resolve():a.then(function(a){return a==null?(i||(i=b("Promise"))).resolve():e.then(function(b){d("MAWMediaManagerUtils").uploadForXMA(b,(h||(h=d("I64"))).of_string(f),[a.file])})})["catch"](function(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("XMA optimistic upload failed")})}g.MAWShareOptimisticUpload=a}),98);
__d("MLCUtils",["Lexical","LexicalSelection","LexicalTable","LexicalUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h={tag:"history-merge"};function i(a,b){a=a.getParent();while(a!==null){if(b(a))return a;a=a.getParent()}return null}function a(a,b){return i(a,b)!==null}function b(a){var b=d("Lexical").$getSelection();if(b!==null)return b;b=a.getEditorState()._selection;if(b===null)return null;a=b.clone();d("Lexical").$setSelection(a);return a}function e(a,b,d){d===void 0&&(d=!0);a=a._nodes.get(b.getType());if(a!==void 0){a=a.klass;if(a!==b){if(d)throw c("err")("Node type is registered but the class reference does not match");return!1}return!0}return!1}function j(a){a=a._nodes;var b=[];for(a of a){var c=a[1];b.push(c.klass)}return b}function f(a,b){var c=[],e=j(a);for(e of e)typeof e==="function"&&c.push(a.registerNodeTransform(e,b));return d("LexicalUtils").mergeRegister.apply(void 0,c)}function k(a){var b=a.anchor,c=a.focus,e=a.anchor.getNode(),f=a.focus.getNode();if(e===f)return e;a=a.isBackward();if(a)return d("LexicalSelection").$isAtNodeEnd(c)?e:f;else return d("LexicalSelection").$isAtNodeEnd(b)?f:e}function l(){var a=d("Lexical").$getSelection();if(a===null)return null;var b;if(d("Lexical").$isRangeSelection(a)||d("LexicalTable").$isTableSelection(a))b=a.focus.getNode();else{a=a.getNodes();b=a[a.length-1]}a=d("LexicalUtils").$findMatchingParent(b,d("LexicalTable").$isTableCellNode);return d("LexicalTable").$isTableCellNode(a)?a:null}function m(){var a=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(a)||!a.isCollapsed())return!1;a=a.anchor.getNode();return d("Lexical").$isElementNode(a)&&d("Lexical").$isBlockElementNode(a)&&a.getTextContentSize()===0}var n=new WeakMap();function o(a,b,c){var d=n.get(a);d===void 0&&(d=new Map(),n.set(a,d));d.set(b,c);return a.dispatchCommand(b,c)}function p(a){var b=d("Lexical").$getSelection(),c=null;if(d("Lexical").$isRangeSelection(b))c=b.focus.getNode();else if(b!==null){c=(b=b.getNodes().at(-1))!=null?b:null}if(c===null||d("Lexical").$isRootOrShadowRoot(c)){b=d("Lexical").$getRoot();b.append.apply(b,a)}else{c=c.getTopLevelElementOrThrow();for(b=a.length-1;b>=0;b--)c.insertAfter(a[b])}}function q(a,b){return(a=(a=n.get(a))==null?void 0:a.get(b))!=null?a:null}function r(a,b,c,d){var e=q(a,b);e!==null&&c(e,a);return a.registerCommand(b,c,d)}g.UPDATE_HISTORY_MERGE_OPTIONS=h;g.$getAncestorPredicate=i;g.$hasAncestorPredicate=a;g.$ifNullRestoreActiveSelection=b;g.lexicalNodeIsRegistered=e;g.lexicalNodes=j;g.registerEveryNodeTransform=f;g.getSelectedNode=k;g.$getActiveTableCellNode=l;g.$isCollapsedSelectionOnEmptyBlockElement=m;g.dispatchCommandWithLVC=o;g.$insertNodesAfterBlock=p;g.lastCommandWithLVCPayload=q;g.registerCommandWithLVC=r}),98);
__d("MLCAutocompleteNode",["Lexical","MLCAutocompletePlugin","MLCUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l=function(a){function b(b,c){c=a.call(this,c)||this;c.__uuid=b;return c}babelHelpers.inheritsLoose(b,a);b.clone=function(a){return new b(a.__uuid,a.__key)};b.getType=function(){return"autocomplete"};b.importJSON=function(a){return m(a.uuid)};var c=b.prototype;c.exportJSON=function(){return{type:"autocomplete",uuid:this.__uuid,version:1}};c.updateDOM=function(a,b,c){return!1};c.createDOM=function(a){return document.createElement("span")};c.decorate=function(a){return this.__uuid!==d("MLCAutocompletePlugin").AutocompleteUUID?null:i.jsx(n,{editor:a})};return b}(d("Lexical").DecoratorNode);function m(a){return new l(a)}function a(a){return a instanceof l}function n(a){var b=a.editor;a=k(d("MLCUtils").lastCommandWithLVCPayload(b,d("MLCAutocompletePlugin").AUTOCOMPLETE_SUGGESTION_COMMAND));var c=a[0],e=a[1];j(function(){return d("MLCUtils").registerCommandWithLVC(b,d("MLCAutocompletePlugin").AUTOCOMPLETE_SUGGESTION_COMMAND,function(a){e(a);return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[b]);a=d("MLCAutocompletePlugin").ComponentMap.get(b);if(a===void 0)return null;return c===null||c.length===0?null:i.jsx(a,{suggestion:c})}n.displayName=n.name+" [from "+f.id+"]";g.MLCAutocompleteNode=l;g.$createMLCAutocompleteNode=m;g.$isMLCAutocompleteNode=a}),98);
__d("MLCAutocompletePlugin",["FBLogger","Lexical","LexicalComposerContext","LexicalSelection","LexicalUtils","MLCAutocompleteNode","MLCUtils","react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useEffect,j=new WeakMap(),k=c("uuidv4")(),l=d("Lexical").createCommand("AUTOCOMPLETE_SUGGESTION_COMMAND");function m(a){if(!d("Lexical").$isRangeSelection(a)||!a.isCollapsed())return null;var b=a.getNodes()[0];a=a.anchor;if(!d("Lexical").$isTextNode(b)||!b.isSimpleText()||!d("LexicalSelection").$isAtNodeEnd(a))return null;a=b.getTextContent();return a.trim().length===0?null:a}function a(a){var b=a.Component,e=a.getSuggestion,f=a.onAccept;a=d("LexicalComposerContext").useLexicalComposerContext();var g=a[0];i(function(){if(j.has(g))throw c("FBLogger")("lexical").mustfixThrow("MLCAutocompletePlugin registered twice");j.set(g,b);return function(){j["delete"](g)}},[b,g]);i(function(){var a=null,b=null,c=null,h=null;function i(){var b=a!==null?d("Lexical").$getNodeByKey(a):null;b!==null&&b.isAttached()&&(b.remove(),a=null);h=null;d("MLCUtils").dispatchCommandWithLVC(g,l,null)}function j(b){var c=b.getKey();b.__uuid===k&&c!==a&&b.remove()}function n(){g.update(function(){var f=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(f)){i();return}var j=m(f);if(j==null||j.length===0){i();return}if(j===b)return;var n=e(j);if(c!=null&&c===n)return;if(n==null||n.length===0){i();return}b=j;c=n;j=a!==null?d("Lexical").$getNodeByKey(a):null;if(j==null||!j.isAttached()){j==null||j.remove();var o=f.clone(),p=d("MLCAutocompleteNode").$createMLCAutocompleteNode(k);a=p.getKey();o.insertNodes([p]);d("Lexical").$setSelection(o)}else if(f.anchor.key!==h){j.remove();p=f.clone();p.insertNodes([j]);d("Lexical").$setSelection(p);h=p.anchor.key}d("MLCUtils").dispatchCommandWithLVC(g,l,n)})}function o(){if(a===null)return!1;var b=d("Lexical").$getNodeByKey(a);if(b===null)return!1;if(c===null)return!1;var e=d("Lexical").$createTextNode(c);b.replace(e);e.selectNext();f!=null&&c!=null&&f(c);i();return!0}function p(a){if(o()){a.preventDefault();return!0}return!1}function q(){g.update(function(){i()})}return d("LexicalUtils").mergeRegister(g.registerNodeTransform(d("MLCAutocompleteNode").MLCAutocompleteNode,j),g.registerUpdateListener(n),g.registerCommand((j=d("Lexical")).KEY_TAB_COMMAND,p,j.COMMAND_PRIORITY_HIGH),g.registerCommand(j.KEY_ARROW_RIGHT_COMMAND,p,j.COMMAND_PRIORITY_HIGH),q)},[g,e,f]);return null}a.displayName=a.name+" [from "+f.id+"]";g.ComponentMap=j;g.AutocompleteUUID=k;g.AUTOCOMPLETE_SUGGESTION_COMMAND=l;g.AutocompletePlugin=a}),98);
__d("UnifiedShareSheetMessengerComposer.react",["fbt","CometComposerEditorForLexicalBootstrapPlugin.react","CometLexicalContentEditable.react","CometLexicalPlaceholder.react","FDSText.react","FeedComposerCometTextStyleContext","Lexical","LexicalComposerContext","LexicalErrorBoundary","LexicalHistoryPlugin","LexicalLinkPlugin","LexicalPlainTextPlugin","UnifiedShareSheetConstants","react","react-compiler-runtime","stylex","useUnifiedShareSheetLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect;b.useMemo;var m=b.useRef,n={editor:{alignItems:"x6s0dn4",cursor:"x1ed109x",display:"x1lliihq",fontSize:"x6prxxf",height:"x5yr21d",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0},form:{backgroundColor:"xmjcpbm",borderStartStartRadius:"x12ol6y4",borderStartEndRadius:"x180vkcf",borderEndEndRadius:"x1khw62d",borderEndStartRadius:"x709u02",cursor:"x1ed109x",display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",maxHeight:"xo1bdp9",minHeight:"xisnujt",paddingTop:"x1y1aw1k",paddingInlineEnd:"xv54qhq",paddingBottom:"xwib8y2",paddingInlineStart:"xf7dkkf",position:"x1n2onr6",$$css:!0},placeholder:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(27),e=a.editor,f=a.feedLocation,g=a.shareableID,j=a.shareSheetComponentVariant,o=a.sharingComponentName;a=a.xstyle;var p;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(p=d("LexicalComposerContext").createLexicalComposerContext(),b[0]=p):p=b[0];b[1]!==e?(p=[e,p],b[1]=e,b[2]=p):p=b[2];p=p;p=p;var q=c("useUnifiedShareSheetLogger")(),r=q.onShareOptionSelected,s;b[3]!==e||b[4]!==f||b[5]!==r||b[6]!==j||b[7]!==g||b[8]!==o?(q=function(){return e.registerCommand(d("Lexical").FOCUS_COMMAND,function(){r({entry_point:f,shareable_entity_fbid:g,sharing_component_name:o,sharing_component_variant:j});return!0},d("Lexical").COMMAND_PRIORITY_EDITOR)},s=[e,f,r,g,j,o],b[3]=e,b[4]=f,b[5]=r,b[6]=j,b[7]=g,b[8]=o,b[9]=q,b[10]=s):(q=b[9],s=b[10]);l(q,s);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(q=d("LexicalHistoryPlugin").createEmptyHistoryState(),b[11]=q):q=b[11];s=q;q=s;s=m(null);var t=m(null),u;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(u=function(a){a=a!=null?a:null;t.current=a},b[12]=u):u=b[12];u=u;var v;b[13]===Symbol["for"]("react.memo_cache_sentinel")?(v=h._(/*BTDS*/"Add an optional message here..."),b[13]=v):v=b[13];v=v;var w;b[14]!==a?(w=(i||(i=c("stylex"))).props(n.form,a),b[14]=a,b[15]=w):w=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x78zum5 x1iyjqo2 x5yr21d x1n2onr6"},b[16]=a):a=b[16];var x;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(x=v.toString(),b[17]=x):x=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(x=k.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary,contentEditable:k.jsx(c("CometLexicalContentEditable.react"),{"aria-placeholder":x,contentEditableRef:u,isInitiallyFocused:!0,placeholder:k.jsx(c("CometLexicalPlaceholder.react"),{xstyle:n.placeholder,children:k.jsx(c("FDSText.react"),{color:"placeholder",numberOfLines:1,type:"body3",children:v})}),spellCheck:!0,tabIndex:0,xstyle:n.editor})}),u=k.jsx(d("LexicalLinkPlugin").LinkPlugin,{}),v=k.jsx(d("LexicalHistoryPlugin").HistoryPlugin,{externalHistoryState:q}),q=k.jsx(c("CometComposerEditorForLexicalBootstrapPlugin.react"),{autoFocus:!0,inputElementRef:t,textAlignment:"left"}),b[18]=x,b[19]=u,b[20]=v,b[21]=q):(x=b[18],u=b[19],v=b[20],q=b[21]);b[22]!==p?(a=k.jsx("div",babelHelpers["extends"]({},a,{children:k.jsx(c("FeedComposerCometTextStyleContext").Provider,{value:d("UnifiedShareSheetConstants").TEXT_STYLE,children:k.jsxs(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:p,children:[x,u,v,q]})})})),b[22]=p,b[23]=a):a=b[23];b[24]!==w||b[25]!==a?(x=k.jsx("form",babelHelpers["extends"]({},w,{method:"POST",ref:s,children:a})),b[24]=w,b[25]=a,b[26]=x):x=b[26];return x}g["default"]=a}),226);
__d("UnifiedShareSheetMessengerLexicalCreateEditor",["CometLexicalDelightNode","CometLexicalEmojiNode","CometLexicalGenericEntityNode","FBLogger","Lexical","LexicalLink","LexicalOverflow","MLCAutocompleteNode","cometLexicalBaseTheme","mlcErrorHandler__INTERNAL"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("Lexical").createEditor({namespace:"UnifiedShareSheetMessengerComposer",nodes:[d("CometLexicalGenericEntityNode").CometLexicalGenericEntityNode,d("CometLexicalEmojiNode").EmojiNode,d("CometLexicalDelightNode").CometLexicalDelightNode,d("MLCAutocompleteNode").MLCAutocompleteNode,d("LexicalOverflow").OverflowNode,d("LexicalLink").LinkNode].filter(Boolean),onError:function(b){return c("mlcErrorHandler__INTERNAL")(b,a,function(a){c("FBLogger")("unfied_share_sheet_messenger_composer").catching(b).mustfix("Lexical Error: %s",a)})},theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{characterLimit:"xayplqe xt0psk2",paragraph:"xdj266r x14z9mp xat24cr x1lziwak x16tdsg8"})});return a}g["default"]=a}),98);
__d("UnifiedShareSheetMessengerMultiSelectionDialogQuery.graphql",["UnifiedShareSheetMessengerMultiSelectionDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedShareSheetMessengerMultiSelectionDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"UnifiedShareSheetSendMessageButton_viewer"}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UnifiedShareSheetMessengerMultiSelectionDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{"if":null,kind:"Defer",label:"UnifiedShareSheetMessengerMultiSelectionDialogQuery$defer$UnifiedShareSheetSendMessageButton_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]}],storageKey:null}]},params:{id:b("UnifiedShareSheetMessengerMultiSelectionDialogQuery_facebookRelayOperation"),metadata:{},name:"UnifiedShareSheetMessengerMultiSelectionDialogQuery",operationKind:"query",text:null}};b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("UnifiedShareSheetMultiSelectionContextProvider",["CometRelay","LoadContactWithCapabilities","MAWFetchXMADataUtils","MAWImageUtils","MAWShareOptimisticGetDevices","MAWShareOptimisticUpload","UnifiedShareSheetConstants","UnifiedShareSheetMultiSelectionContext","gkx","promiseDone","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var b=a.children,e=a.initialSelectedTarget,f=a.setSendButtonStatus,g=a.xmaDataPromise,h=d("CometRelay").useRelayEnvironment(),k=c("useAsyncReStore")();a=j(function(){var a=new Map(),b=new Map(),i=g!=null?g.then(function(a){return d("MAWFetchXMADataUtils").makeXMAFileArgs(a)}):null,j=g!=null&&c("gkx")("14072")?g.then(function(a){return i!=null?i:d("MAWFetchXMADataUtils").makeXMAFileArgs(a)}).then(function(a){a.faviconFileArgs;a.headerImageFileArgs;a=a.previewFileArgs;return d("MAWImageUtils").generatePreviewBlobForShare(a)}):null;e!=null&&!a.has(e.id)&&(a.set(e.id,e),b.set(e.id,d("LoadContactWithCapabilities").tryLoadContactAggressively(e.id,h)),c("gkx")("14072")&&c("promiseDone")(d("MAWShareOptimisticUpload").MAWShareOptimisticUpload(j,k,e.id)),d("MAWShareOptimisticGetDevices").MAWShareOptimisticGetDevices(k,[e.id]));var l=function(e){if(e!=null){a.has(e.id)||a.set(e.id,e);a.size>1&&a.size===2?f(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND_SEPARATELY):a.size===1&&f(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND);var g=a.keys().toArray();d("MAWShareOptimisticGetDevices").MAWShareOptimisticGetDevices(k,g);b.has(e.id)||(b.set(e.id,d("LoadContactWithCapabilities").tryLoadContactAggressively(e.id,h)),c("gkx")("14072")&&c("promiseDone")(d("MAWShareOptimisticUpload").MAWShareOptimisticUpload(j,k,e.id)))}},m=function(b){b!=null&&(a.has(b)&&a["delete"](b),a.size<=1&&a.size===1?f(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND):a.size===0&&f(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.DISABLED))},n=function(){return j},o=function(){return i};return{AddSeletectTarget:l,RemoveSelectedTarget:m,getXMAFileArgsPromise:o,getXMAPreviewPromise:n,selectedContacts:b,selectedTargets:a}},[k,h,e,f,g]);return i.jsx(c("UnifiedShareSheetMultiSelectionContext").Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("UnifiedShareSheetMessengerMultiSelectionDialog.react",["fbt","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometPlaceholder.react","CometRelay","CometUnifiedShareSheetErrorState.react","FDSDialogHeader.react","FDSDialogPage.react","MWFacebookUserWithoutMessengerAccess","UnifiedShareSheetConstants","UnifiedShareSheetHScrollContainerPlaceholder.react","UnifiedShareSheetMessengerLexicalCreateEditor","UnifiedShareSheetMessengerMultiSelectionDialogQuery$Parameters","UnifiedShareSheetMessengerMultiSelectionDialogQuery.graphql","UnifiedShareSheetMessengerSection.react","UnifiedShareSheetMultiSelectionContextProvider","UnifiedShareSheetSendMessageButtonPlaceholder.react","UnifiedShareSheetSendMessageComposerPlaceholder.react","deferredLoadComponent","react","requireDeferredForDisplay","usePartialViewImpression","usePopPage","useRefetchablePreloadedQuery","useUnifiedShareSheetLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useMemo,n=e.useState,o=c("deferredLoadComponent")(c("requireDeferredForDisplay")("UnifiedShareSheetMessengerComposer.react").__setRef("UnifiedShareSheetMessengerMultiSelectionDialog.react")),p=c("deferredLoadComponent")(c("requireDeferredForDisplay")("UnifiedShareSheetSendMessageButton.react").__setRef("UnifiedShareSheetMessengerMultiSelectionDialog.react")),q=i!==void 0?i:i=b("UnifiedShareSheetMessengerMultiSelectionDialogQuery.graphql");function a(a){var b=a.props;a=a.queries;var e=c("useRefetchablePreloadedQuery")(c("UnifiedShareSheetMessengerMultiSelectionDialogQuery$Parameters"),a.multipleSelectionQueryReference),f=e[0];e=e[1];e=d("CometRelay").usePreloadedQuery(q,e);var g=a.multipleSelectionQueryReference.variables,i=l(function(){f(g)},[f,g]),j=b.LSresults,r=b.feedLocation,s=b.feedTracking,t=b.hasLightSpeedResults,u=b.initialScrollToIndex,v=b.initialSelectedTarget,w=b.onClose,x=b.shareableID,y=b.storyData,z=b.xmaDataPromise,A=m(function(){return{editor:c("UnifiedShareSheetMessengerLexicalCreateEditor")(),inputState:{__type:"lexical-editor-state-based"}}},[]);A=A.editor;var B=c("useUnifiedShareSheetLogger")(),C=B.onSharesheetImpression,D=c("usePopPage")();B=c("usePartialViewImpression")({onImpressionStart:function(){C({entry_point:b.feedLocation,shareable_entity_fbid:x,sharing_component_name:"hscroll_multiselect_suggested_recipient",sharing_component_variant:"unified_share_sheet"})}});var E=n(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND),F=E[0];E=E[1];var G=d("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),H=h._(/*BTDS*/"Send in Messenger"),I=h._(/*BTDS*/"Send a message");G=G?I:H;return k.jsx(c("UnifiedShareSheetMultiSelectionContextProvider"),{initialSelectedTarget:v,setSendButtonStatus:E,xmaDataPromise:z,children:k.jsx(c("FDSDialogPage.react"),{footer:null,header:k.jsx(c("FDSDialogHeader.react"),{onBack:function(){D&&D()},onClose:w,text:G,withBackButton:!0,withCloseButton:!0}),mobileFullHeight:!1,children:k.jsx(c("CometErrorBoundary.react"),{fallback:function(a){return k.jsx(c("CometUnifiedShareSheetErrorState.react"),{handleRefresh:i})},children:k.jsxs(c("CometColumn.react"),{paddingTop:8,paddingVertical:16,ref:B,spacing:16,children:[k.jsx(c("CometColumnItem.react"),{paddingHorizontal:0,children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("UnifiedShareSheetHScrollContainerPlaceholder.react"),{}),name:"UnifiedShareSheetMessengerMultiSelectionDialog.MessengerSection",children:k.jsx(c("UnifiedShareSheetMessengerSection.react"),{LSresults:j,enableMultiSelection:!0,feedLocation:r,feedTracking:s,hasLightSpeedResults:t,initialScrollToIndex:u,initialSelectedIndex:b.initialSelectedIndex,messengerQueryReference:a.messengerQueryReference,onClose:b.onClose,shareableID:b.shareableID,shareableUrl:b.shareableUrl,storyData:y,xmaDataPromise:z})})}),k.jsx(c("CometColumnItem.react"),{paddingHorizontal:16,paddingTop:0,children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("UnifiedShareSheetSendMessageComposerPlaceholder.react"),{}),name:"UnifiedShareSheetMessengerMultiSelectionDialog.Composer",children:k.jsx(o,{editor:A,feedLocation:r,shareSheetComponentVariant:"unified_share_sheet",shareableID:x,sharingComponentName:"hscroll_multiselect_message_composer"})})}),k.jsx(c("CometColumnItem.react"),{paddingHorizontal:16,paddingTop:0,children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("UnifiedShareSheetSendMessageButtonPlaceholder.react"),{}),name:"UnifiedShareSheetMessengerMultiSelectionDialog.SendMessageButton",children:k.jsx(p,{editor:A,feedLocation:r,feedTracking:s,onClose:w,sendButtonStatus:F,shareableID:b.shareableID,storyData:y,url:b.shareableUrl||"",viewerRef:e==null?void 0:e.viewer,xmaDataPromise:z})})})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("UnifiedShareSheetSendMessageButton_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedShareSheetSendMessageButton_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("useUnifiedShareSheetPopChat",["SharingConstants","react","react-compiler-runtime","useMWChatOpenTabForGroup","useMWChatOpenTabForPage","useMWChatOpenTabForUser"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(4),b=c("useMWChatOpenTabForUser")(d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT),e=b.openTabByThreadKey;b=c("useMWChatOpenTabForGroup")(d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT);var f=b[2],g=c("useMWChatOpenTabForPage")(d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT);a[0]!==e||a[1]!==f||a[2]!==g?(b=function(a){var b=a.isSecureShare;a=a.target;bb2:switch(a.targetType){case"USER":e(a.targetID,b);break bb2;case"GROUP":f(a.targetID,b);break bb2;case"PAGE":g(a.targetID);break bb2;default:}},a[0]=e,a[1]=f,a[2]=g,a[3]=b):b=a[3];return b}g["default"]=a}),98);
__d("UnifiedShareSheetSendMessageButton.react",["fbt","ix","CometLinkSharingContext","CometLinkSharingUtil","CometMessengerReshareUtil","CometRelay","FBLogger","FDSButton.react","I64","LSMessagingThreadAttributionType","LSSLogger","MAWExternalId","MAWFetchXMAData","MAWSecureComposerText","MAWThreadId","MWMsgMediaTypeLogUtils","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","RelayHooks","SharingConstants","SilenceableErrorMessageUtils","UnifiedShareSheetConstants","UnifiedShareSheetMultiSelectionContext","UnifiedShareSheetSendMessageButton_viewer.graphql","WAGetSafeQPLError","WAResultOrError","WAStanzaUtils","cometPushToast","fbicon","getErrorSafe","isStringNullOrEmpty","promiseDone","react","requireDeferred","sendToSentQPLLogger","useMWSendAttachment","useReStore","useUnifiedShareSheetLogger","useUnifiedShareSheetPopChat"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useCallback,p=e.useContext,q=e.useMemo,r=c("requireDeferred")("ShareMetricsLoggingController").__setRef("UnifiedShareSheetSendMessageButton.react"),s=h._(/*BTDS*/"Send"),t=h._(/*BTDS*/"Send separately");function a(a){var e=a.editor,f=a.feedLocation,g=a.feedTracking,m=a.onClose,u=a.sendButtonStatus,v=a.shareableID,w=a.storyData,x=a.url,y=a.viewerRef,z=a.xmaDataPromise,A=d("CometMessengerReshareUtil").isXMAFeedPostShareEnabled()||!1;a=p(c("CometLinkSharingContext"));var B=a.getWrappedShareUrlID;a=p(c("UnifiedShareSheetMultiSelectionContext"));var C=a.selectedContacts,D=a.selectedTargets;a=d("CometRelay").useFragment(j!==void 0?j:j=b("UnifiedShareSheetSendMessageButton_viewer.graphql"),y);y=a==null?void 0:a.actor;var E=y==null?void 0:y.id,F=q(function(){return{entry_point:f,feed_tracking:g?g.toString():"",sharing_component_name:"hscroll_multiselect_suggested_recipient"}},[f,g]),G=q(function(){return{entry_point:f,feed_tracking:g?g.toString():"",sharing_component_name:"hscroll_multiselect_message_composer"}},[f,g]),H=q(function(){return{entry_point:f,feed_tracking:g!=null?g:[""],sharing_component_name:"hscroll_multiselect_suggested_recipient"}},[g,f]),I=c("useUnifiedShareSheetLogger")(),J=I.onSendMessageButtonInUSSAttempted,K=I.onSendMessageInMessengerSuccessful,L=I.onSendMessageInMessengerUSSFailed,M=I.onSendMessageInMessengerUSSSuccessful;if(E==null||y==null||v==null)throw c("FBLogger")("fb_social_experience_web_sharing").mustfixThrow("Need a viewer id, actor, story, and postID in order to share a story");var N=c("useUnifiedShareSheetPopChat")(),O=(a==null?void 0:a.chat_tabs_turned_off)===!0,P=d("useMWSendAttachment").useMWSendAttachment(),Q=d("useMWSendAttachment").useMWPreloadSendAttachmentComponents(),R=(k||(k=c("useReStore")))();I=d("LSSLogger").useLSSLogger();var S=I.traceLocalSendMessageAsync,T=d("RelayHooks").useRelayEnvironment(),U=o(async function(a,b,e,g,h,i){var j={isTargetE2E:a.isTargetE2E,targetID:a.targetID,targetType:a.targetType,typeName:a.typeName};a="user";var k="one_to_one";switch(j.targetType){case"USER":a="user";k="one_to_one";break;case"GROUP":a="group";k="group";break;case"PAGE":a="page";k="one_to_one";break;default:a="user"}var m=B(w==null?void 0:w.id),n={actorID:E,entryPoint:d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT,message:b,messagingInformTreatmentInfo:w==null?void 0:w.messagingInformTreatmentInfo,shareID:m!=null?m:v,targetID:j.targetID,targetType:a,url:x},o=h!=null?h:await S(),p=d("MAWExternalId").generateExternalId(),q=d("WAStanzaUtils").toStanzaId(p),s=await d("MAWThreadId").getThread(R.tables,(l||(l=d("I64"))).of_string(j.targetID));m=async function(a){try{var h=s!=null?c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:c("LSMessagingThreadAttributionType").UNKNOWN;if(s!=null){var i=d("MWSharedS2SBaseAnnotations").getMessageTypeParams({messageText:b,sentFromShareSheet:!0,threadType:s.threadType});c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations({attachmentTypeParams:i,messageOfflineThreadingId:q,source:h,thread:s}),function(b){b.string=babelHelpers.extends({},b.string,{attachment_type:"share",message_type:"share",root_component:"UnifiedShareSheetSendMessageButton",surface:f}),b.int={number_targets:e},d("sendToSentQPLLogger").addSendToSentAnnotations(a,b)});o.addAnnotation("surface",f||"unknown");o.addAnnotationInt("number_targets",e);d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(o,i,s,"UnifiedShareSheetSendMessageButton")}d("sendToSentQPLLogger").markSendToSentPoint(a,"start_post_sharing");i=await P({attachment:n,contactWithCapabilityPromises:C.has(j.targetID)?C.get(j.targetID):void 0,lssTraceApi:o,offlineMsgId:p,reshareTarget:j,s2sInstanceKey:a,sharingComponent:d("useMWSendAttachment").SharingComponentType.USS_H_SCROLL,source:h,thread:s,xmaDataPromise:z,xmaDataProps:g,xmaMsgExternalId:q});if(i.success===!1)return[d("WAResultOrError").makeError(i.error)];r.onReady(function(a){a.logShareFunnelEvent({fb_entry_point:"send_in_message",fb_feed_location:f,fb_share_type:"share_created",shareable_id:null})});J(babelHelpers.extends({},G,{is_link_sharing_url_used:d("CometLinkSharingUtil").isLinkSharingUrlUsed(x),is_text_attached:!c("isStringNullOrEmpty")(b),receiver_type:k}));d("sendToSentQPLLogger").markSendToSentSuccess(a);M(babelHelpers.extends({},F));K(babelHelpers.extends({},H,{receiver_count:D.size.toString()}));if(!O){N({isSecureShare:(h=i.value.target.isTargetE2E)!=null?h:A,target:i.value.target})}return[d("WAResultOrError").makeResult(i.value.report)]}catch(b){h=c("getErrorSafe")(b);d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{share_error:d("WAGetSafeQPLError").getSafeQPLErrorMessage(h),share_error_entrypoint:"UnifiedShareSheet"}});d("sendToSentQPLLogger").markSendToSentFail(a,"unknown_xma_error",h);o.failTrace(h.toString(),!0);throw h}};a=i!=null?i:d("sendToSentQPLLogger").markSendToSentStart(void 0,d("MWMsgMediaTypeLogUtils").AttachmentType.Share);await m(a)},[B,w==null?void 0:w.id,w==null?void 0:w.messagingInformTreatmentInfo,E,v,x,S,R,P,C,z,J,G,M,F,K,H,D.size,O,f,N,A]),V=o(function(a){r.onReady(function(a){a.logShareFunnelEvent({fb_entry_point:"send_in_message",fb_feed_location:f,fb_share_type:"share_failure",shareable_id:null})});L(babelHelpers.extends({},F));a=d("SilenceableErrorMessageUtils").getMetadataFromError(a.error);if(d("SilenceableErrorMessageUtils").shouldHideErrorMessage(a))return;d("cometPushToast").cometPushErrorToast({message:h._(/*BTDS*/"There was a problem sharing this post. Please try again later.")})},[f,F,L]),W=o(async function(){try{var a=e.getEditorState(),b=d("MAWSecureComposerText").getTextFromEditorState(a);m();var f={linkType:"unknown",transportLayerForLogging:"sender_copy",xmaTargetTypeForLogging:null},g=new Map();a=Array.from(D.values()).map(async function(a){var b=d("sendToSentQPLLogger").markSendToSentStart(void 0,d("MWMsgMediaTypeLogUtils").AttachmentType.Share),c=await S();a!=null&&g.set(a,{lssTraceApi:c,s2sInstanceKey:b});return g});await Promise.all(a);x==null&&(g.forEach(function(a){a.lssTraceApi.failTrace("null_xma_url",!0),d("sendToSentQPLLogger").markSendToSentFail(a.s2sInstanceKey,"null_xma_url")}),c("FBLogger")("messenger_web_sharing").mustfix("[MAWShareAttachment] Attachment URL is null"));var h=[];g.forEach(function(a){a.lssTraceApi.addMarkerPoint("xma_data_query_start","AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(a.s2sInstanceKey,"xma_data_query_start"),h.push(a.s2sInstanceKey)});z!=null?f=await z:f=await d("MAWFetchXMAData").fetchXMAData(T,x,h);g.forEach(function(a){a.lssTraceApi.addMarkerPoint("xma_data_query_end","AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(a.s2sInstanceKey,"xma_data_query_end")});a=Array.from(D.values()).map(function(a){var c;return a!=null&&U(a,b,D.size,f,(c=g.get(a))==null?void 0:c.lssTraceApi,(c=g.get(a))==null?void 0:c.s2sInstanceKey)});await Promise.all(a)}catch(a){V(a);c("FBLogger")("fb_social_experience_web_sharing").catching(a).mustfix("error on sending message in unified share sheet");return}},[e,m,D,x,z,S,T,U,V]);y=u===d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND_SEPARATELY?t:s;return n.jsx(c("FDSButton.react"),{disabled:u===d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.DISABLED,icon:d("fbicon")._(i("505616"),16),label:y,onHoverIn:function(){return Q()},onPress:function(){return c("promiseDone")(W())}})}a.displayName=a.name+" [from "+f.id+"]";g.default=a}),226);